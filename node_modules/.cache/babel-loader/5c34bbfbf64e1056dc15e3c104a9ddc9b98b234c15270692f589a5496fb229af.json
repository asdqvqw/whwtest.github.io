{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { defineComponent, h, ref, toRef, nextTick, computed, Transition } from 'vue';\nimport { createTreeMate } from 'treemate';\nimport { VBinder, VFollower, VTarget } from 'vueuc';\nimport { useIsMounted, useMergedState } from 'vooks';\nimport { NInput } from '../../input';\nimport { NInternalSelectMenu } from '../../_internal';\nimport { call, useAdjustedTo, warn } from '../../_utils';\nimport { useConfig, useFormItem, useTheme, useThemeClass } from '../../_mixins';\nimport { mentionLight } from '../styles';\nimport { getRelativePosition } from './utils';\nimport style from './styles/index.cssr';\nexport const mentionProps = Object.assign(Object.assign({}, useTheme.props), {\n  to: useAdjustedTo.propTo,\n  autosize: [Boolean, Object],\n  options: {\n    type: Array,\n    default: []\n  },\n  type: {\n    type: String,\n    default: 'text'\n  },\n  separator: {\n    type: String,\n    validator: separator => {\n      if (separator.length !== 1) {\n        warn('mention', \"`separator`'s length must be 1.\");\n        return false;\n      }\n      return true;\n    },\n    default: ' '\n  },\n  bordered: {\n    type: Boolean,\n    default: undefined\n  },\n  disabled: Boolean,\n  value: String,\n  defaultValue: {\n    type: String,\n    default: ''\n  },\n  loading: Boolean,\n  prefix: {\n    type: [String, Array],\n    default: '@'\n  },\n  placeholder: {\n    type: String,\n    default: ''\n  },\n  placement: {\n    type: String,\n    default: 'bottom-start'\n  },\n  size: String,\n  renderLabel: Function,\n  status: String,\n  'onUpdate:show': [Array, Function],\n  onUpdateShow: [Array, Function],\n  'onUpdate:value': [Array, Function],\n  onUpdateValue: [Array, Function],\n  onSearch: Function,\n  onSelect: Function,\n  onFocus: Function,\n  onBlur: Function,\n  // private\n  internalDebug: Boolean\n});\nexport default defineComponent({\n  name: 'Mention',\n  props: mentionProps,\n  setup(props) {\n    const {\n      namespaceRef,\n      mergedClsPrefixRef,\n      mergedBorderedRef,\n      inlineThemeDisabled\n    } = useConfig(props);\n    const themeRef = useTheme('Mention', '-mention', style, mentionLight, props, mergedClsPrefixRef);\n    const formItem = useFormItem(props);\n    const inputInstRef = ref(null);\n    const cursorRef = ref(null);\n    const followerRef = ref(null);\n    const partialPatternRef = ref('');\n    let cachedPrefix = null;\n    // cached pattern end is for partial pattern\n    // for example @abc|def\n    // end is after `c`\n    let cachedPartialPatternStart = null;\n    let cachedPartialPatternEnd = null;\n    const filteredOptionsRef = computed(() => {\n      const {\n        value: pattern\n      } = partialPatternRef;\n      return props.options.filter(option => {\n        if (!pattern) return true;\n        if (typeof option.label === 'string') {\n          return option.label.startsWith(pattern);\n        }\n        if (typeof option.value === 'string') {\n          return option.value.startsWith(pattern);\n        }\n        return false;\n      });\n    });\n    const treeMateRef = computed(() => {\n      return createTreeMate(filteredOptionsRef.value, {\n        getKey: v => {\n          return v.value;\n        }\n      });\n    });\n    const selectMenuInstRef = ref(null);\n    const showMenuRef = ref(false);\n    const uncontrolledValueRef = ref(props.defaultValue);\n    const controlledValueRef = toRef(props, 'value');\n    const mergedValueRef = useMergedState(controlledValueRef, uncontrolledValueRef);\n    const cssVarsRef = computed(() => {\n      const {\n        self: {\n          menuBoxShadow\n        }\n      } = themeRef.value;\n      return {\n        '--n-menu-box-shadow': menuBoxShadow\n      };\n    });\n    const themeClassHandle = inlineThemeDisabled ? useThemeClass('mention', undefined, cssVarsRef, props) : undefined;\n    function doUpdateShowMenu(show) {\n      if (props.disabled) return;\n      const {\n        onUpdateShow,\n        'onUpdate:show': _onUpdateShow\n      } = props;\n      if (onUpdateShow) call(onUpdateShow, show);\n      if (_onUpdateShow) call(_onUpdateShow, show);\n      if (!show) {\n        cachedPrefix = null;\n        cachedPartialPatternStart = null;\n        cachedPartialPatternEnd = null;\n      }\n      showMenuRef.value = show;\n    }\n    function doUpdateValue(value) {\n      const {\n        onUpdateValue,\n        'onUpdate:value': _onUpdateValue\n      } = props;\n      const {\n        nTriggerFormChange,\n        nTriggerFormInput\n      } = formItem;\n      if (_onUpdateValue) {\n        call(_onUpdateValue, value);\n      }\n      if (onUpdateValue) {\n        call(onUpdateValue, value);\n      }\n      nTriggerFormInput();\n      nTriggerFormChange();\n      uncontrolledValueRef.value = value;\n    }\n    function getInputEl() {\n      return props.type === 'text' ? inputInstRef.value.inputElRef : inputInstRef.value.textareaElRef;\n    }\n    function deriveShowMenu() {\n      var _a;\n      const inputEl = getInputEl();\n      if (document.activeElement !== inputEl) {\n        doUpdateShowMenu(false);\n        return;\n      }\n      const {\n        selectionEnd\n      } = inputEl;\n      if (selectionEnd === null) {\n        doUpdateShowMenu(false);\n        return;\n      }\n      const inputValue = inputEl.value;\n      const {\n        separator\n      } = props;\n      const {\n        prefix\n      } = props;\n      const prefixArray = typeof prefix === 'string' ? [prefix] : prefix;\n      for (let i = selectionEnd - 1; i >= 0; --i) {\n        const char = inputValue[i];\n        if (char === separator || char === '\\n' || char === '\\r') {\n          doUpdateShowMenu(false);\n          return;\n        }\n        if (prefixArray.includes(char)) {\n          const partialPattern = inputValue.slice(i + 1, selectionEnd);\n          doUpdateShowMenu(true);\n          (_a = props.onSearch) === null || _a === void 0 ? void 0 : _a.call(props, partialPattern, char);\n          partialPatternRef.value = partialPattern;\n          cachedPrefix = char;\n          cachedPartialPatternStart = i + 1;\n          cachedPartialPatternEnd = selectionEnd;\n          return;\n        }\n      }\n      doUpdateShowMenu(false);\n    }\n    function syncCursor() {\n      const {\n        value: cursorAnchor\n      } = cursorRef;\n      if (!cursorAnchor) return;\n      const inputEl = getInputEl();\n      const cursorPos = getRelativePosition(inputEl);\n      cursorPos.left += inputEl.parentElement.offsetLeft;\n      cursorAnchor.style.left = `${cursorPos.left}px`;\n      cursorAnchor.style.top = `${cursorPos.top + cursorPos.height}px`;\n    }\n    function syncPosition() {\n      var _a;\n      if (!showMenuRef.value) return;\n      (_a = followerRef.value) === null || _a === void 0 ? void 0 : _a.syncPosition();\n    }\n    function handleInputUpdateValue(value) {\n      doUpdateValue(value);\n      // Vue update is mirco task.\n      // So DOM must have been done when sync start in marco task.\n      // I can't use nextTick(), Chrome doesn't update scrollLeft of INPUT\n      // element is immediatelly updated. The behavior is wired but that's what\n      // happens.\n      syncAfterCursorMove();\n    }\n    function syncAfterCursorMove() {\n      setTimeout(() => {\n        syncCursor();\n        deriveShowMenu();\n        void nextTick().then(syncPosition);\n      }, 0);\n    }\n    function handleInputKeyDown(e) {\n      var _a, _b;\n      if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {\n        if ((_a = inputInstRef.value) === null || _a === void 0 ? void 0 : _a.isCompositing) return;\n        syncAfterCursorMove();\n      } else if (e.key === 'ArrowUp' || e.key === 'ArrowDown' || e.key === 'Enter') {\n        if ((_b = inputInstRef.value) === null || _b === void 0 ? void 0 : _b.isCompositing) return;\n        const {\n          value: selectMenuInst\n        } = selectMenuInstRef;\n        if (showMenuRef.value) {\n          if (selectMenuInst) {\n            e.preventDefault();\n            if (e.key === 'ArrowUp') {\n              selectMenuInst.prev();\n            } else if (e.key === 'ArrowDown') {\n              selectMenuInst.next();\n            } else {\n              // Enter\n              const pendingOptionTmNode = selectMenuInst.getPendingTmNode();\n              if (pendingOptionTmNode) {\n                handleSelect(pendingOptionTmNode);\n              } else {\n                doUpdateShowMenu(false);\n              }\n            }\n          }\n        } else {\n          syncAfterCursorMove();\n        }\n      }\n    }\n    function handleInputFocus(e) {\n      const {\n        onFocus\n      } = props;\n      onFocus === null || onFocus === void 0 ? void 0 : onFocus(e);\n      const {\n        nTriggerFormFocus\n      } = formItem;\n      nTriggerFormFocus();\n      syncAfterCursorMove();\n    }\n    function focus() {\n      var _a;\n      (_a = inputInstRef.value) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n    function blur() {\n      var _a;\n      (_a = inputInstRef.value) === null || _a === void 0 ? void 0 : _a.blur();\n    }\n    function handleInputBlur(e) {\n      const {\n        onBlur\n      } = props;\n      onBlur === null || onBlur === void 0 ? void 0 : onBlur(e);\n      const {\n        nTriggerFormBlur\n      } = formItem;\n      nTriggerFormBlur();\n      doUpdateShowMenu(false);\n    }\n    function handleSelect(tmNode) {\n      var _a;\n      if (cachedPrefix === null || cachedPartialPatternStart === null || cachedPartialPatternEnd === null) {\n        if (process.env.NODE_ENV !== 'production') {\n          warn('mention', 'Cache works unexpectly, this is probably a bug. Please create an issue.');\n        }\n        return;\n      }\n      const {\n        rawNode: {\n          value = ''\n        }\n      } = tmNode;\n      const inputEl = getInputEl();\n      const inputValue = inputEl.value;\n      const {\n        separator\n      } = props;\n      const nextEndPart = inputValue.slice(cachedPartialPatternEnd);\n      const alreadySeparated = nextEndPart.startsWith(separator);\n      const nextMiddlePart = `${value}${alreadySeparated ? '' : separator}`;\n      doUpdateValue(inputValue.slice(0, cachedPartialPatternStart) + nextMiddlePart + nextEndPart);\n      (_a = props.onSelect) === null || _a === void 0 ? void 0 : _a.call(props, tmNode.rawNode, cachedPrefix);\n      const nextSelectionEnd = cachedPartialPatternStart + nextMiddlePart.length + (alreadySeparated ? 1 : 0);\n      void nextTick().then(() => {\n        // input value is updated\n        inputEl.selectionStart = nextSelectionEnd;\n        inputEl.selectionEnd = nextSelectionEnd;\n        deriveShowMenu();\n      });\n    }\n    function handleInputMouseDown() {\n      if (!props.disabled) {\n        syncAfterCursorMove();\n      }\n    }\n    return {\n      namespace: namespaceRef,\n      mergedClsPrefix: mergedClsPrefixRef,\n      mergedBordered: mergedBorderedRef,\n      mergedSize: formItem.mergedSizeRef,\n      mergedStatus: formItem.mergedStatusRef,\n      mergedTheme: themeRef,\n      treeMate: treeMateRef,\n      selectMenuInstRef,\n      inputInstRef,\n      cursorRef,\n      followerRef,\n      showMenu: showMenuRef,\n      adjustedTo: useAdjustedTo(props),\n      isMounted: useIsMounted(),\n      mergedValue: mergedValueRef,\n      handleInputFocus,\n      handleInputBlur,\n      handleInputUpdateValue,\n      handleInputKeyDown,\n      handleSelect,\n      handleInputMouseDown,\n      focus,\n      blur,\n      cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n      themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n      onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender\n    };\n  },\n  render() {\n    const {\n      mergedTheme,\n      mergedClsPrefix,\n      $slots\n    } = this;\n    return h(\"div\", {\n      class: `${mergedClsPrefix}-mention`\n    }, h(NInput, {\n      status: this.mergedStatus,\n      themeOverrides: mergedTheme.peerOverrides.Input,\n      theme: mergedTheme.peers.Input,\n      size: this.mergedSize,\n      autosize: this.autosize,\n      type: this.type,\n      ref: \"inputInstRef\",\n      placeholder: this.placeholder,\n      onMousedown: this.handleInputMouseDown,\n      onUpdateValue: this.handleInputUpdateValue,\n      onKeydown: this.handleInputKeyDown,\n      onFocus: this.handleInputFocus,\n      onBlur: this.handleInputBlur,\n      bordered: this.mergedBordered,\n      disabled: this.disabled,\n      value: this.mergedValue\n    }), h(VBinder, null, {\n      default: () => [h(VTarget, null, {\n        default: () => {\n          const style = {\n            position: 'absolute',\n            width: 0,\n            height: 0\n          };\n          if (process.env.NODE_ENV !== 'production' && this.internalDebug) {\n            style.width = '1px';\n            style.height = '1px';\n            style.background = 'red';\n          }\n          return h(\"div\", {\n            style: style,\n            ref: \"cursorRef\"\n          });\n        }\n      }), h(VFollower, {\n        ref: \"followerRef\",\n        placement: this.placement,\n        show: this.showMenu,\n        containerClass: this.namespace,\n        to: this.adjustedTo,\n        teleportDisabled: this.adjustedTo === useAdjustedTo.tdkey\n      }, {\n        default: () => h(Transition, {\n          name: \"fade-in-scale-up-transition\",\n          appear: this.isMounted\n        }, {\n          default: () => {\n            const {\n              mergedTheme,\n              onRender\n            } = this;\n            onRender === null || onRender === void 0 ? void 0 : onRender();\n            return this.showMenu ? h(NInternalSelectMenu, {\n              clsPrefix: mergedClsPrefix,\n              theme: mergedTheme.peers.InternalSelectMenu,\n              themeOverrides: mergedTheme.peerOverrides.InternalSelectMenu,\n              autoPending: true,\n              ref: \"selectMenuInstRef\",\n              class: [`${mergedClsPrefix}-mention-menu`, this.themeClass],\n              loading: this.loading,\n              treeMate: this.treeMate,\n              virtualScroll: false,\n              style: this.cssVars,\n              onToggle: this.handleSelect,\n              renderLabel: this.renderLabel\n            }, $slots) : null;\n          }\n        })\n      })]\n    }));\n  }\n});","map":{"version":3,"names":["defineComponent","h","ref","toRef","nextTick","computed","Transition","createTreeMate","VBinder","VFollower","VTarget","useIsMounted","useMergedState","NInput","NInternalSelectMenu","call","useAdjustedTo","warn","useConfig","useFormItem","useTheme","useThemeClass","mentionLight","getRelativePosition","style","mentionProps","Object","assign","props","to","propTo","autosize","Boolean","options","type","Array","default","String","separator","validator","length","bordered","undefined","disabled","value","defaultValue","loading","prefix","placeholder","placement","size","renderLabel","Function","status","onUpdateShow","onUpdateValue","onSearch","onSelect","onFocus","onBlur","internalDebug","name","setup","namespaceRef","mergedClsPrefixRef","mergedBorderedRef","inlineThemeDisabled","themeRef","formItem","inputInstRef","cursorRef","followerRef","partialPatternRef","cachedPrefix","cachedPartialPatternStart","cachedPartialPatternEnd","filteredOptionsRef","pattern","filter","option","label","startsWith","treeMateRef","getKey","v","selectMenuInstRef","showMenuRef","uncontrolledValueRef","controlledValueRef","mergedValueRef","cssVarsRef","self","menuBoxShadow","themeClassHandle","doUpdateShowMenu","show","_onUpdateShow","doUpdateValue","_onUpdateValue","nTriggerFormChange","nTriggerFormInput","getInputEl","inputElRef","textareaElRef","deriveShowMenu","_a","inputEl","document","activeElement","selectionEnd","inputValue","prefixArray","i","char","includes","partialPattern","slice","syncCursor","cursorAnchor","cursorPos","left","parentElement","offsetLeft","top","height","syncPosition","handleInputUpdateValue","syncAfterCursorMove","setTimeout","then","handleInputKeyDown","e","_b","key","isCompositing","selectMenuInst","preventDefault","prev","next","pendingOptionTmNode","getPendingTmNode","handleSelect","handleInputFocus","nTriggerFormFocus","focus","blur","handleInputBlur","nTriggerFormBlur","tmNode","process","env","NODE_ENV","rawNode","nextEndPart","alreadySeparated","nextMiddlePart","nextSelectionEnd","selectionStart","handleInputMouseDown","namespace","mergedClsPrefix","mergedBordered","mergedSize","mergedSizeRef","mergedStatus","mergedStatusRef","mergedTheme","treeMate","showMenu","adjustedTo","isMounted","mergedValue","cssVars","themeClass","onRender","render","$slots","class","themeOverrides","peerOverrides","Input","theme","peers","onMousedown","onKeydown","position","width","background","containerClass","teleportDisabled","tdkey","appear","clsPrefix","InternalSelectMenu","autoPending","virtualScroll","onToggle"],"sources":["/home/whw/Vue/whwtest.github.io/node_modules/naive-ui/es/mention/src/Mention.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { defineComponent, h, ref, toRef, nextTick, computed, Transition } from 'vue';\nimport { createTreeMate } from 'treemate';\nimport { VBinder, VFollower, VTarget } from 'vueuc';\nimport { useIsMounted, useMergedState } from 'vooks';\nimport { NInput } from '../../input';\nimport { NInternalSelectMenu } from '../../_internal';\nimport { call, useAdjustedTo, warn } from '../../_utils';\nimport { useConfig, useFormItem, useTheme, useThemeClass } from '../../_mixins';\nimport { mentionLight } from '../styles';\nimport { getRelativePosition } from './utils';\nimport style from './styles/index.cssr';\nexport const mentionProps = Object.assign(Object.assign({}, useTheme.props), { to: useAdjustedTo.propTo, autosize: [Boolean, Object], options: {\n        type: Array,\n        default: []\n    }, type: {\n        type: String,\n        default: 'text'\n    }, separator: {\n        type: String,\n        validator: (separator) => {\n            if (separator.length !== 1) {\n                warn('mention', \"`separator`'s length must be 1.\");\n                return false;\n            }\n            return true;\n        },\n        default: ' '\n    }, bordered: {\n        type: Boolean,\n        default: undefined\n    }, disabled: Boolean, value: String, defaultValue: {\n        type: String,\n        default: ''\n    }, loading: Boolean, prefix: {\n        type: [String, Array],\n        default: '@'\n    }, placeholder: {\n        type: String,\n        default: ''\n    }, placement: {\n        type: String,\n        default: 'bottom-start'\n    }, size: String, renderLabel: Function, status: String, 'onUpdate:show': [Array, Function], onUpdateShow: [Array, Function], 'onUpdate:value': [Array, Function], onUpdateValue: [Array, Function], onSearch: Function, onSelect: Function, onFocus: Function, onBlur: Function, \n    // private\n    internalDebug: Boolean });\nexport default defineComponent({\n    name: 'Mention',\n    props: mentionProps,\n    setup(props) {\n        const { namespaceRef, mergedClsPrefixRef, mergedBorderedRef, inlineThemeDisabled } = useConfig(props);\n        const themeRef = useTheme('Mention', '-mention', style, mentionLight, props, mergedClsPrefixRef);\n        const formItem = useFormItem(props);\n        const inputInstRef = ref(null);\n        const cursorRef = ref(null);\n        const followerRef = ref(null);\n        const partialPatternRef = ref('');\n        let cachedPrefix = null;\n        // cached pattern end is for partial pattern\n        // for example @abc|def\n        // end is after `c`\n        let cachedPartialPatternStart = null;\n        let cachedPartialPatternEnd = null;\n        const filteredOptionsRef = computed(() => {\n            const { value: pattern } = partialPatternRef;\n            return props.options.filter((option) => {\n                if (!pattern)\n                    return true;\n                if (typeof option.label === 'string') {\n                    return option.label.startsWith(pattern);\n                }\n                if (typeof option.value === 'string') {\n                    return option.value.startsWith(pattern);\n                }\n                return false;\n            });\n        });\n        const treeMateRef = computed(() => {\n            return createTreeMate(filteredOptionsRef.value, {\n                getKey: (v) => {\n                    return v.value;\n                }\n            });\n        });\n        const selectMenuInstRef = ref(null);\n        const showMenuRef = ref(false);\n        const uncontrolledValueRef = ref(props.defaultValue);\n        const controlledValueRef = toRef(props, 'value');\n        const mergedValueRef = useMergedState(controlledValueRef, uncontrolledValueRef);\n        const cssVarsRef = computed(() => {\n            const { self: { menuBoxShadow } } = themeRef.value;\n            return {\n                '--n-menu-box-shadow': menuBoxShadow\n            };\n        });\n        const themeClassHandle = inlineThemeDisabled\n            ? useThemeClass('mention', undefined, cssVarsRef, props)\n            : undefined;\n        function doUpdateShowMenu(show) {\n            if (props.disabled)\n                return;\n            const { onUpdateShow, 'onUpdate:show': _onUpdateShow } = props;\n            if (onUpdateShow)\n                call(onUpdateShow, show);\n            if (_onUpdateShow)\n                call(_onUpdateShow, show);\n            if (!show) {\n                cachedPrefix = null;\n                cachedPartialPatternStart = null;\n                cachedPartialPatternEnd = null;\n            }\n            showMenuRef.value = show;\n        }\n        function doUpdateValue(value) {\n            const { onUpdateValue, 'onUpdate:value': _onUpdateValue } = props;\n            const { nTriggerFormChange, nTriggerFormInput } = formItem;\n            if (_onUpdateValue) {\n                call(_onUpdateValue, value);\n            }\n            if (onUpdateValue) {\n                call(onUpdateValue, value);\n            }\n            nTriggerFormInput();\n            nTriggerFormChange();\n            uncontrolledValueRef.value = value;\n        }\n        function getInputEl() {\n            return props.type === 'text'\n                ? inputInstRef.value.inputElRef\n                : inputInstRef.value.textareaElRef;\n        }\n        function deriveShowMenu() {\n            var _a;\n            const inputEl = getInputEl();\n            if (document.activeElement !== inputEl) {\n                doUpdateShowMenu(false);\n                return;\n            }\n            const { selectionEnd } = inputEl;\n            if (selectionEnd === null) {\n                doUpdateShowMenu(false);\n                return;\n            }\n            const inputValue = inputEl.value;\n            const { separator } = props;\n            const { prefix } = props;\n            const prefixArray = typeof prefix === 'string' ? [prefix] : prefix;\n            for (let i = selectionEnd - 1; i >= 0; --i) {\n                const char = inputValue[i];\n                if (char === separator || char === '\\n' || char === '\\r') {\n                    doUpdateShowMenu(false);\n                    return;\n                }\n                if (prefixArray.includes(char)) {\n                    const partialPattern = inputValue.slice(i + 1, selectionEnd);\n                    doUpdateShowMenu(true);\n                    (_a = props.onSearch) === null || _a === void 0 ? void 0 : _a.call(props, partialPattern, char);\n                    partialPatternRef.value = partialPattern;\n                    cachedPrefix = char;\n                    cachedPartialPatternStart = i + 1;\n                    cachedPartialPatternEnd = selectionEnd;\n                    return;\n                }\n            }\n            doUpdateShowMenu(false);\n        }\n        function syncCursor() {\n            const { value: cursorAnchor } = cursorRef;\n            if (!cursorAnchor)\n                return;\n            const inputEl = getInputEl();\n            const cursorPos = getRelativePosition(inputEl);\n            cursorPos.left += inputEl.parentElement.offsetLeft;\n            cursorAnchor.style.left = `${cursorPos.left}px`;\n            cursorAnchor.style.top = `${cursorPos.top + cursorPos.height}px`;\n        }\n        function syncPosition() {\n            var _a;\n            if (!showMenuRef.value)\n                return;\n            (_a = followerRef.value) === null || _a === void 0 ? void 0 : _a.syncPosition();\n        }\n        function handleInputUpdateValue(value) {\n            doUpdateValue(value);\n            // Vue update is mirco task.\n            // So DOM must have been done when sync start in marco task.\n            // I can't use nextTick(), Chrome doesn't update scrollLeft of INPUT\n            // element is immediatelly updated. The behavior is wired but that's what\n            // happens.\n            syncAfterCursorMove();\n        }\n        function syncAfterCursorMove() {\n            setTimeout(() => {\n                syncCursor();\n                deriveShowMenu();\n                void nextTick().then(syncPosition);\n            }, 0);\n        }\n        function handleInputKeyDown(e) {\n            var _a, _b;\n            if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {\n                if ((_a = inputInstRef.value) === null || _a === void 0 ? void 0 : _a.isCompositing)\n                    return;\n                syncAfterCursorMove();\n            }\n            else if (e.key === 'ArrowUp' ||\n                e.key === 'ArrowDown' ||\n                e.key === 'Enter') {\n                if ((_b = inputInstRef.value) === null || _b === void 0 ? void 0 : _b.isCompositing)\n                    return;\n                const { value: selectMenuInst } = selectMenuInstRef;\n                if (showMenuRef.value) {\n                    if (selectMenuInst) {\n                        e.preventDefault();\n                        if (e.key === 'ArrowUp') {\n                            selectMenuInst.prev();\n                        }\n                        else if (e.key === 'ArrowDown') {\n                            selectMenuInst.next();\n                        }\n                        else {\n                            // Enter\n                            const pendingOptionTmNode = selectMenuInst.getPendingTmNode();\n                            if (pendingOptionTmNode) {\n                                handleSelect(pendingOptionTmNode);\n                            }\n                            else {\n                                doUpdateShowMenu(false);\n                            }\n                        }\n                    }\n                }\n                else {\n                    syncAfterCursorMove();\n                }\n            }\n        }\n        function handleInputFocus(e) {\n            const { onFocus } = props;\n            onFocus === null || onFocus === void 0 ? void 0 : onFocus(e);\n            const { nTriggerFormFocus } = formItem;\n            nTriggerFormFocus();\n            syncAfterCursorMove();\n        }\n        function focus() {\n            var _a;\n            (_a = inputInstRef.value) === null || _a === void 0 ? void 0 : _a.focus();\n        }\n        function blur() {\n            var _a;\n            (_a = inputInstRef.value) === null || _a === void 0 ? void 0 : _a.blur();\n        }\n        function handleInputBlur(e) {\n            const { onBlur } = props;\n            onBlur === null || onBlur === void 0 ? void 0 : onBlur(e);\n            const { nTriggerFormBlur } = formItem;\n            nTriggerFormBlur();\n            doUpdateShowMenu(false);\n        }\n        function handleSelect(tmNode) {\n            var _a;\n            if (cachedPrefix === null ||\n                cachedPartialPatternStart === null ||\n                cachedPartialPatternEnd === null) {\n                if (process.env.NODE_ENV !== 'production') {\n                    warn('mention', 'Cache works unexpectly, this is probably a bug. Please create an issue.');\n                }\n                return;\n            }\n            const { rawNode: { value = '' } } = tmNode;\n            const inputEl = getInputEl();\n            const inputValue = inputEl.value;\n            const { separator } = props;\n            const nextEndPart = inputValue.slice(cachedPartialPatternEnd);\n            const alreadySeparated = nextEndPart.startsWith(separator);\n            const nextMiddlePart = `${value}${alreadySeparated ? '' : separator}`;\n            doUpdateValue(inputValue.slice(0, cachedPartialPatternStart) +\n                nextMiddlePart +\n                nextEndPart);\n            (_a = props.onSelect) === null || _a === void 0 ? void 0 : _a.call(props, tmNode.rawNode, cachedPrefix);\n            const nextSelectionEnd = cachedPartialPatternStart +\n                nextMiddlePart.length +\n                (alreadySeparated ? 1 : 0);\n            void nextTick().then(() => {\n                // input value is updated\n                inputEl.selectionStart = nextSelectionEnd;\n                inputEl.selectionEnd = nextSelectionEnd;\n                deriveShowMenu();\n            });\n        }\n        function handleInputMouseDown() {\n            if (!props.disabled) {\n                syncAfterCursorMove();\n            }\n        }\n        return {\n            namespace: namespaceRef,\n            mergedClsPrefix: mergedClsPrefixRef,\n            mergedBordered: mergedBorderedRef,\n            mergedSize: formItem.mergedSizeRef,\n            mergedStatus: formItem.mergedStatusRef,\n            mergedTheme: themeRef,\n            treeMate: treeMateRef,\n            selectMenuInstRef,\n            inputInstRef,\n            cursorRef,\n            followerRef,\n            showMenu: showMenuRef,\n            adjustedTo: useAdjustedTo(props),\n            isMounted: useIsMounted(),\n            mergedValue: mergedValueRef,\n            handleInputFocus,\n            handleInputBlur,\n            handleInputUpdateValue,\n            handleInputKeyDown,\n            handleSelect,\n            handleInputMouseDown,\n            focus,\n            blur,\n            cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n            themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n            onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender\n        };\n    },\n    render() {\n        const { mergedTheme, mergedClsPrefix, $slots } = this;\n        return (h(\"div\", { class: `${mergedClsPrefix}-mention` },\n            h(NInput, { status: this.mergedStatus, themeOverrides: mergedTheme.peerOverrides.Input, theme: mergedTheme.peers.Input, size: this.mergedSize, autosize: this.autosize, type: this.type, ref: \"inputInstRef\", placeholder: this.placeholder, onMousedown: this.handleInputMouseDown, onUpdateValue: this.handleInputUpdateValue, onKeydown: this.handleInputKeyDown, onFocus: this.handleInputFocus, onBlur: this.handleInputBlur, bordered: this.mergedBordered, disabled: this.disabled, value: this.mergedValue }),\n            h(VBinder, null, {\n                default: () => [\n                    h(VTarget, null, {\n                        default: () => {\n                            const style = {\n                                position: 'absolute',\n                                width: 0,\n                                height: 0\n                            };\n                            if (process.env.NODE_ENV !== 'production' && this.internalDebug) {\n                                style.width = '1px';\n                                style.height = '1px';\n                                style.background = 'red';\n                            }\n                            return h(\"div\", { style: style, ref: \"cursorRef\" });\n                        }\n                    }),\n                    h(VFollower, { ref: \"followerRef\", placement: this.placement, show: this.showMenu, containerClass: this.namespace, to: this.adjustedTo, teleportDisabled: this.adjustedTo === useAdjustedTo.tdkey }, {\n                        default: () => (h(Transition, { name: \"fade-in-scale-up-transition\", appear: this.isMounted }, {\n                            default: () => {\n                                const { mergedTheme, onRender } = this;\n                                onRender === null || onRender === void 0 ? void 0 : onRender();\n                                return this.showMenu ? (h(NInternalSelectMenu, { clsPrefix: mergedClsPrefix, theme: mergedTheme.peers.InternalSelectMenu, themeOverrides: mergedTheme.peerOverrides.InternalSelectMenu, autoPending: true, ref: \"selectMenuInstRef\", class: [\n                                        `${mergedClsPrefix}-mention-menu`,\n                                        this.themeClass\n                                    ], loading: this.loading, treeMate: this.treeMate, virtualScroll: false, style: this.cssVars, onToggle: this.handleSelect, renderLabel: this.renderLabel }, $slots)) : null;\n                            }\n                        }))\n                    })\n                ]\n            })));\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}