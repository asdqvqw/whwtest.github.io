{"ast":null,"code":"import { h, defineComponent, Fragment, ref, withDirectives, Transition, vShow, watch, computed, toRef, onBeforeUnmount, inject, normalizeStyle } from 'vue';\nimport { zindexable } from 'vdirs';\nimport { useIsMounted } from 'vooks';\nimport { LazyTeleport } from 'vueuc';\nimport { on, off } from 'evtd';\nimport { beforeNextFrameOnce } from 'seemly';\nimport { kebabCase } from 'lodash-es';\nimport { download } from '../../upload/src/utils';\nimport { RotateClockwiseIcon, RotateCounterclockwiseIcon, ZoomInIcon, ZoomOutIcon, ResizeSmallIcon } from '../../_internal/icons';\nimport { useConfig, useLocale, useTheme, useThemeClass } from '../../_mixins';\nimport { NBaseIcon } from '../../_internal';\nimport { NTooltip } from '../../tooltip';\nimport { imageLight } from '../styles';\nimport { prevIcon, nextIcon, closeIcon, downloadIcon } from './icons';\nimport { imageContextKey, imagePreviewSharedProps } from './interface';\nimport style from './styles/index.cssr';\nconst BLEEDING = 32;\nexport default defineComponent({\n  name: 'ImagePreview',\n  props: Object.assign(Object.assign({}, imagePreviewSharedProps), {\n    onNext: Function,\n    onPrev: Function,\n    clsPrefix: {\n      type: String,\n      required: true\n    }\n  }),\n  setup(props) {\n    const themeRef = useTheme('Image', '-image', style, imageLight, props, toRef(props, 'clsPrefix'));\n    let thumbnailEl = null;\n    const previewRef = ref(null);\n    const previewWrapperRef = ref(null);\n    const previewSrcRef = ref(undefined);\n    const showRef = ref(false);\n    const displayedRef = ref(false);\n    const {\n      localeRef\n    } = useLocale('Image');\n    function syncTransformOrigin() {\n      const {\n        value: previewWrapper\n      } = previewWrapperRef;\n      if (!thumbnailEl || !previewWrapper) return;\n      const {\n        style\n      } = previewWrapper;\n      const tbox = thumbnailEl.getBoundingClientRect();\n      const tx = tbox.left + tbox.width / 2;\n      const ty = tbox.top + tbox.height / 2;\n      style.transformOrigin = `${tx}px ${ty}px`;\n    }\n    function handleKeydown(e) {\n      var _a, _b;\n      switch (e.key) {\n        case ' ':\n          e.preventDefault();\n          break;\n        case 'ArrowLeft':\n          (_a = props.onPrev) === null || _a === void 0 ? void 0 : _a.call(props);\n          break;\n        case 'ArrowRight':\n          (_b = props.onNext) === null || _b === void 0 ? void 0 : _b.call(props);\n          break;\n        case 'Escape':\n          toggleShow();\n          break;\n      }\n    }\n    watch(showRef, value => {\n      if (value) {\n        on('keydown', document, handleKeydown);\n      } else off('keydown', document, handleKeydown);\n    });\n    onBeforeUnmount(() => {\n      off('keydown', document, handleKeydown);\n    });\n    let startX = 0;\n    let startY = 0;\n    let offsetX = 0;\n    let offsetY = 0;\n    let startOffsetX = 0;\n    let startOffsetY = 0;\n    let mouseDownClientX = 0;\n    let mouseDownClientY = 0;\n    let dragging = false;\n    function handleMouseMove(e) {\n      const {\n        clientX,\n        clientY\n      } = e;\n      offsetX = clientX - startX;\n      offsetY = clientY - startY;\n      beforeNextFrameOnce(derivePreviewStyle);\n    }\n    function getMoveStrategy(opts) {\n      const {\n        mouseUpClientX,\n        mouseUpClientY,\n        mouseDownClientX,\n        mouseDownClientY\n      } = opts;\n      const deltaHorizontal = mouseDownClientX - mouseUpClientX;\n      const deltaVertical = mouseDownClientY - mouseUpClientY;\n      const moveVerticalDirection = `vertical${deltaVertical > 0 ? 'Top' : 'Bottom'}`;\n      const moveHorizontalDirection = `horizontal${deltaHorizontal > 0 ? 'Left' : 'Right'}`;\n      return {\n        moveVerticalDirection,\n        moveHorizontalDirection,\n        deltaHorizontal,\n        deltaVertical\n      };\n    }\n    // avoid image move outside viewport\n    function getDerivedOffset(moveStrategy) {\n      const {\n        value: preview\n      } = previewRef;\n      if (!preview) return {\n        offsetX: 0,\n        offsetY: 0\n      };\n      const pbox = preview.getBoundingClientRect();\n      const {\n        moveVerticalDirection,\n        moveHorizontalDirection,\n        deltaHorizontal,\n        deltaVertical\n      } = moveStrategy || {};\n      let nextOffsetX = 0;\n      let nextOffsetY = 0;\n      if (pbox.width <= window.innerWidth) {\n        nextOffsetX = 0;\n      } else if (pbox.left > 0) {\n        nextOffsetX = (pbox.width - window.innerWidth) / 2;\n      } else if (pbox.right < window.innerWidth) {\n        nextOffsetX = -(pbox.width - window.innerWidth) / 2;\n      } else if (moveHorizontalDirection === 'horizontalRight') {\n        nextOffsetX = Math.min((pbox.width - window.innerWidth) / 2, startOffsetX - (deltaHorizontal !== null && deltaHorizontal !== void 0 ? deltaHorizontal : 0));\n      } else {\n        nextOffsetX = Math.max(-((pbox.width - window.innerWidth) / 2), startOffsetX - (deltaHorizontal !== null && deltaHorizontal !== void 0 ? deltaHorizontal : 0));\n      }\n      if (pbox.height <= window.innerHeight) {\n        nextOffsetY = 0;\n      } else if (pbox.top > 0) {\n        nextOffsetY = (pbox.height - window.innerHeight) / 2;\n      } else if (pbox.bottom < window.innerHeight) {\n        nextOffsetY = -(pbox.height - window.innerHeight) / 2;\n      } else if (moveVerticalDirection === 'verticalBottom') {\n        nextOffsetY = Math.min((pbox.height - window.innerHeight) / 2, startOffsetY - (deltaVertical !== null && deltaVertical !== void 0 ? deltaVertical : 0));\n      } else {\n        nextOffsetY = Math.max(-((pbox.height - window.innerHeight) / 2), startOffsetY - (deltaVertical !== null && deltaVertical !== void 0 ? deltaVertical : 0));\n      }\n      return {\n        offsetX: nextOffsetX,\n        offsetY: nextOffsetY\n      };\n    }\n    function handleMouseUp(e) {\n      off('mousemove', document, handleMouseMove);\n      off('mouseup', document, handleMouseUp);\n      const {\n        clientX: mouseUpClientX,\n        clientY: mouseUpClientY\n      } = e;\n      dragging = false;\n      const moveStrategy = getMoveStrategy({\n        mouseUpClientX,\n        mouseUpClientY,\n        mouseDownClientX,\n        mouseDownClientY\n      });\n      const offset = getDerivedOffset(moveStrategy);\n      offsetX = offset.offsetX;\n      offsetY = offset.offsetY;\n      derivePreviewStyle();\n    }\n    const imageContext = inject(imageContextKey, null);\n    function handlePreviewMousedown(e) {\n      var _a, _b;\n      (_b = (_a = imageContext === null || imageContext === void 0 ? void 0 : imageContext.previewedImgPropsRef.value) === null || _a === void 0 ? void 0 : _a.onMousedown) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n      if (e.button !== 0) return;\n      const {\n        clientX,\n        clientY\n      } = e;\n      dragging = true;\n      startX = clientX - offsetX;\n      startY = clientY - offsetY;\n      startOffsetX = offsetX;\n      startOffsetY = offsetY;\n      mouseDownClientX = clientX;\n      mouseDownClientY = clientY;\n      derivePreviewStyle();\n      on('mousemove', document, handleMouseMove);\n      on('mouseup', document, handleMouseUp);\n    }\n    function handlePreviewDblclick(e) {\n      var _a, _b;\n      (_b = (_a = imageContext === null || imageContext === void 0 ? void 0 : imageContext.previewedImgPropsRef.value) === null || _a === void 0 ? void 0 : _a.onDblclick) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n      const originalImageSizeScale = getOrignalImageSizeScale();\n      scale = scale === originalImageSizeScale ? 1 : originalImageSizeScale;\n      derivePreviewStyle();\n    }\n    const scaleRadix = 1.5;\n    let scaleExp = 0;\n    let scale = 1;\n    let rotate = 0;\n    function resetScale() {\n      scale = 1;\n      scaleExp = 0;\n    }\n    function handleSwitchPrev() {\n      var _a;\n      resetScale();\n      rotate = 0;\n      (_a = props.onPrev) === null || _a === void 0 ? void 0 : _a.call(props);\n    }\n    function handleSwitchNext() {\n      var _a;\n      resetScale();\n      rotate = 0;\n      (_a = props.onNext) === null || _a === void 0 ? void 0 : _a.call(props);\n    }\n    function rotateCounterclockwise() {\n      rotate -= 90;\n      derivePreviewStyle();\n    }\n    function rotateClockwise() {\n      rotate += 90;\n      derivePreviewStyle();\n    }\n    function getMaxScale() {\n      const {\n        value: preview\n      } = previewRef;\n      if (!preview) return 1;\n      const {\n        innerWidth,\n        innerHeight\n      } = window;\n      const heightMaxScale = Math.max(1, preview.naturalHeight / (innerHeight - BLEEDING));\n      const widthMaxScale = Math.max(1, preview.naturalWidth / (innerWidth - BLEEDING));\n      return Math.max(3, heightMaxScale * 2, widthMaxScale * 2);\n    }\n    function getOrignalImageSizeScale() {\n      const {\n        value: preview\n      } = previewRef;\n      if (!preview) return 1;\n      const {\n        innerWidth,\n        innerHeight\n      } = window;\n      const heightScale = preview.naturalHeight / (innerHeight - BLEEDING);\n      const widthScale = preview.naturalWidth / (innerWidth - BLEEDING);\n      if (heightScale < 1 && widthScale < 1) {\n        return 1;\n      }\n      return Math.max(heightScale, widthScale);\n    }\n    function zoomIn() {\n      const maxScale = getMaxScale();\n      if (scale < maxScale) {\n        scaleExp += 1;\n        scale = Math.min(maxScale, Math.pow(scaleRadix, scaleExp));\n        derivePreviewStyle();\n      }\n    }\n    function zoomOut() {\n      if (scale > 0.5) {\n        const originalScale = scale;\n        scaleExp -= 1;\n        scale = Math.max(0.5, Math.pow(scaleRadix, scaleExp));\n        const diff = originalScale - scale;\n        derivePreviewStyle(false);\n        const offset = getDerivedOffset();\n        scale += diff;\n        derivePreviewStyle(false);\n        scale -= diff;\n        offsetX = offset.offsetX;\n        offsetY = offset.offsetY;\n        derivePreviewStyle();\n      }\n    }\n    function handleDownloadClick() {\n      const src = previewSrcRef.value;\n      if (src) {\n        download(src, undefined);\n      }\n    }\n    function derivePreviewStyle(transition = true) {\n      var _a;\n      const {\n        value: preview\n      } = previewRef;\n      if (!preview) return;\n      const {\n        style\n      } = preview;\n      const controlledStyle = normalizeStyle((_a = imageContext === null || imageContext === void 0 ? void 0 : imageContext.previewedImgPropsRef.value) === null || _a === void 0 ? void 0 : _a.style);\n      let controlledStyleString = '';\n      if (typeof controlledStyle === 'string') {\n        controlledStyleString = controlledStyle + ';';\n      } else {\n        for (const key in controlledStyle) {\n          controlledStyleString += `${kebabCase(key)}: ${controlledStyle[key]};`;\n        }\n      }\n      const transformStyle = `transform-origin: center; transform: translateX(${offsetX}px) translateY(${offsetY}px) rotate(${rotate}deg) scale(${scale});`;\n      if (dragging) {\n        style.cssText = controlledStyleString + 'cursor: grabbing; transition: none;' + transformStyle;\n      } else {\n        style.cssText = controlledStyleString + 'cursor: grab;' + transformStyle + (transition ? '' : 'transition: none;');\n      }\n      if (!transition) {\n        void preview.offsetHeight;\n      }\n    }\n    function toggleShow() {\n      showRef.value = !showRef.value;\n      displayedRef.value = true;\n    }\n    function resizeToOrignalImageSize() {\n      scale = getOrignalImageSizeScale();\n      scaleExp = Math.ceil(Math.log(scale) / Math.log(scaleRadix));\n      offsetX = 0;\n      offsetY = 0;\n      derivePreviewStyle();\n    }\n    const exposedMethods = {\n      setPreviewSrc: src => {\n        previewSrcRef.value = src;\n      },\n      setThumbnailEl: el => {\n        thumbnailEl = el;\n      },\n      toggleShow\n    };\n    function withTooltip(node, tooltipKey) {\n      if (props.showToolbarTooltip) {\n        const {\n          value: theme\n        } = themeRef;\n        return h(NTooltip, {\n          to: false,\n          theme: theme.peers.Tooltip,\n          themeOverrides: theme.peerOverrides.Tooltip,\n          keepAliveOnHover: false\n        }, {\n          default: () => {\n            return localeRef.value[tooltipKey];\n          },\n          trigger: () => node\n        });\n      } else {\n        return node;\n      }\n    }\n    const cssVarsRef = computed(() => {\n      const {\n        common: {\n          cubicBezierEaseInOut\n        },\n        self: {\n          toolbarIconColor,\n          toolbarBorderRadius,\n          toolbarBoxShadow,\n          toolbarColor\n        }\n      } = themeRef.value;\n      return {\n        '--n-bezier': cubicBezierEaseInOut,\n        '--n-toolbar-icon-color': toolbarIconColor,\n        '--n-toolbar-color': toolbarColor,\n        '--n-toolbar-border-radius': toolbarBorderRadius,\n        '--n-toolbar-box-shadow': toolbarBoxShadow\n      };\n    });\n    const {\n      inlineThemeDisabled\n    } = useConfig();\n    const themeClassHandle = inlineThemeDisabled ? useThemeClass('image-preview', undefined, cssVarsRef, props) : undefined;\n    return Object.assign({\n      previewRef,\n      previewWrapperRef,\n      previewSrc: previewSrcRef,\n      show: showRef,\n      appear: useIsMounted(),\n      displayed: displayedRef,\n      previewedImgProps: imageContext === null || imageContext === void 0 ? void 0 : imageContext.previewedImgPropsRef,\n      handleWheel(e) {\n        e.preventDefault();\n      },\n      handlePreviewMousedown,\n      handlePreviewDblclick,\n      syncTransformOrigin,\n      handleAfterLeave: () => {\n        resetScale();\n        rotate = 0;\n        displayedRef.value = false;\n      },\n      handleDragStart: e => {\n        var _a, _b;\n        (_b = (_a = imageContext === null || imageContext === void 0 ? void 0 : imageContext.previewedImgPropsRef.value) === null || _a === void 0 ? void 0 : _a.onDragstart) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        e.preventDefault();\n      },\n      zoomIn,\n      zoomOut,\n      handleDownloadClick,\n      rotateCounterclockwise,\n      rotateClockwise,\n      handleSwitchPrev,\n      handleSwitchNext,\n      withTooltip,\n      resizeToOrignalImageSize,\n      cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n      themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n      onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender\n    }, exposedMethods);\n  },\n  render() {\n    var _a, _b;\n    const {\n      clsPrefix\n    } = this;\n    return h(Fragment, null, (_b = (_a = this.$slots).default) === null || _b === void 0 ? void 0 : _b.call(_a), h(LazyTeleport, {\n      show: this.show\n    }, {\n      default: () => {\n        var _a;\n        if (!(this.show || this.displayed)) {\n          return null;\n        }\n        (_a = this.onRender) === null || _a === void 0 ? void 0 : _a.call(this);\n        return withDirectives(h(\"div\", {\n          class: [`${clsPrefix}-image-preview-container`, this.themeClass],\n          style: this.cssVars,\n          onWheel: this.handleWheel\n        }, h(Transition, {\n          name: \"fade-in-transition\",\n          appear: this.appear\n        }, {\n          default: () => this.show ? h(\"div\", {\n            class: `${clsPrefix}-image-preview-overlay`,\n            onClick: this.toggleShow\n          }) : null\n        }), this.showToolbar ? h(Transition, {\n          name: \"fade-in-transition\",\n          appear: this.appear\n        }, {\n          default: () => {\n            if (!this.show) return null;\n            const {\n              withTooltip\n            } = this;\n            return h(\"div\", {\n              class: `${clsPrefix}-image-preview-toolbar`\n            }, this.onPrev ? h(Fragment, null, withTooltip(h(NBaseIcon, {\n              clsPrefix: clsPrefix,\n              onClick: this.handleSwitchPrev\n            }, {\n              default: () => prevIcon\n            }), 'tipPrevious'), withTooltip(h(NBaseIcon, {\n              clsPrefix: clsPrefix,\n              onClick: this.handleSwitchNext\n            }, {\n              default: () => nextIcon\n            }), 'tipNext')) : null, withTooltip(h(NBaseIcon, {\n              clsPrefix: clsPrefix,\n              onClick: this.rotateCounterclockwise\n            }, {\n              default: () => h(RotateCounterclockwiseIcon, null)\n            }), 'tipCounterclockwise'), withTooltip(h(NBaseIcon, {\n              clsPrefix: clsPrefix,\n              onClick: this.rotateClockwise\n            }, {\n              default: () => h(RotateClockwiseIcon, null)\n            }), 'tipClockwise'), withTooltip(h(NBaseIcon, {\n              clsPrefix: clsPrefix,\n              onClick: this.resizeToOrignalImageSize\n            }, {\n              default: () => {\n                return h(ResizeSmallIcon, null);\n              }\n            }), 'tipOriginalSize'), withTooltip(h(NBaseIcon, {\n              clsPrefix: clsPrefix,\n              onClick: this.zoomOut\n            }, {\n              default: () => h(ZoomOutIcon, null)\n            }), 'tipZoomOut'), withTooltip(h(NBaseIcon, {\n              clsPrefix: clsPrefix,\n              onClick: this.zoomIn\n            }, {\n              default: () => h(ZoomInIcon, null)\n            }), 'tipZoomIn'), withTooltip(h(NBaseIcon, {\n              clsPrefix: clsPrefix,\n              onClick: this.handleDownloadClick\n            }, {\n              default: () => downloadIcon\n            }), 'tipDownload'), withTooltip(h(NBaseIcon, {\n              clsPrefix: clsPrefix,\n              onClick: this.toggleShow\n            }, {\n              default: () => closeIcon\n            }), 'tipClose'));\n          }\n        }) : null, h(Transition, {\n          name: \"fade-in-scale-up-transition\",\n          onAfterLeave: this.handleAfterLeave,\n          appear: this.appear,\n          // BUG:\n          // onEnter will be called twice, I don't know why\n          // Maybe it is a bug of vue\n          onEnter: this.syncTransformOrigin,\n          onBeforeLeave: this.syncTransformOrigin\n        }, {\n          default: () => {\n            const {\n              previewedImgProps = {}\n            } = this;\n            return withDirectives(h(\"div\", {\n              class: `${clsPrefix}-image-preview-wrapper`,\n              ref: \"previewWrapperRef\"\n            }, h(\"img\", Object.assign({}, previewedImgProps, {\n              draggable: false,\n              onMousedown: this.handlePreviewMousedown,\n              onDblclick: this.handlePreviewDblclick,\n              class: [`${clsPrefix}-image-preview`, previewedImgProps.class],\n              key: this.previewSrc,\n              src: this.previewSrc,\n              ref: \"previewRef\",\n              onDragstart: this.handleDragStart\n            }))), [[vShow, this.show]]);\n          }\n        })), [[zindexable, {\n          enabled: this.show\n        }]]);\n      }\n    }));\n  }\n});","map":{"version":3,"names":["h","defineComponent","Fragment","ref","withDirectives","Transition","vShow","watch","computed","toRef","onBeforeUnmount","inject","normalizeStyle","zindexable","useIsMounted","LazyTeleport","on","off","beforeNextFrameOnce","kebabCase","download","RotateClockwiseIcon","RotateCounterclockwiseIcon","ZoomInIcon","ZoomOutIcon","ResizeSmallIcon","useConfig","useLocale","useTheme","useThemeClass","NBaseIcon","NTooltip","imageLight","prevIcon","nextIcon","closeIcon","downloadIcon","imageContextKey","imagePreviewSharedProps","style","BLEEDING","name","props","Object","assign","onNext","Function","onPrev","clsPrefix","type","String","required","setup","themeRef","thumbnailEl","previewRef","previewWrapperRef","previewSrcRef","undefined","showRef","displayedRef","localeRef","syncTransformOrigin","value","previewWrapper","tbox","getBoundingClientRect","tx","left","width","ty","top","height","transformOrigin","handleKeydown","e","_a","_b","key","preventDefault","call","toggleShow","document","startX","startY","offsetX","offsetY","startOffsetX","startOffsetY","mouseDownClientX","mouseDownClientY","dragging","handleMouseMove","clientX","clientY","derivePreviewStyle","getMoveStrategy","opts","mouseUpClientX","mouseUpClientY","deltaHorizontal","deltaVertical","moveVerticalDirection","moveHorizontalDirection","getDerivedOffset","moveStrategy","preview","pbox","nextOffsetX","nextOffsetY","window","innerWidth","right","Math","min","max","innerHeight","bottom","handleMouseUp","offset","imageContext","handlePreviewMousedown","previewedImgPropsRef","onMousedown","button","handlePreviewDblclick","onDblclick","originalImageSizeScale","getOrignalImageSizeScale","scale","scaleRadix","scaleExp","rotate","resetScale","handleSwitchPrev","handleSwitchNext","rotateCounterclockwise","rotateClockwise","getMaxScale","heightMaxScale","naturalHeight","widthMaxScale","naturalWidth","heightScale","widthScale","zoomIn","maxScale","pow","zoomOut","originalScale","diff","handleDownloadClick","src","transition","controlledStyle","controlledStyleString","transformStyle","cssText","offsetHeight","resizeToOrignalImageSize","ceil","log","exposedMethods","setPreviewSrc","setThumbnailEl","el","withTooltip","node","tooltipKey","showToolbarTooltip","theme","to","peers","Tooltip","themeOverrides","peerOverrides","keepAliveOnHover","default","trigger","cssVarsRef","common","cubicBezierEaseInOut","self","toolbarIconColor","toolbarBorderRadius","toolbarBoxShadow","toolbarColor","inlineThemeDisabled","themeClassHandle","previewSrc","show","appear","displayed","previewedImgProps","handleWheel","handleAfterLeave","handleDragStart","onDragstart","cssVars","themeClass","onRender","render","$slots","class","onWheel","onClick","showToolbar","onAfterLeave","onEnter","onBeforeLeave","draggable","enabled"],"sources":["/home/whw/Vue/whwtest.github.io/node_modules/naive-ui/es/image/src/ImagePreview.js"],"sourcesContent":["import { h, defineComponent, Fragment, ref, withDirectives, Transition, vShow, watch, computed, toRef, onBeforeUnmount, inject, normalizeStyle } from 'vue';\nimport { zindexable } from 'vdirs';\nimport { useIsMounted } from 'vooks';\nimport { LazyTeleport } from 'vueuc';\nimport { on, off } from 'evtd';\nimport { beforeNextFrameOnce } from 'seemly';\nimport { kebabCase } from 'lodash-es';\nimport { download } from '../../upload/src/utils';\nimport { RotateClockwiseIcon, RotateCounterclockwiseIcon, ZoomInIcon, ZoomOutIcon, ResizeSmallIcon } from '../../_internal/icons';\nimport { useConfig, useLocale, useTheme, useThemeClass } from '../../_mixins';\nimport { NBaseIcon } from '../../_internal';\nimport { NTooltip } from '../../tooltip';\nimport { imageLight } from '../styles';\nimport { prevIcon, nextIcon, closeIcon, downloadIcon } from './icons';\nimport { imageContextKey, imagePreviewSharedProps } from './interface';\nimport style from './styles/index.cssr';\nconst BLEEDING = 32;\nexport default defineComponent({\n    name: 'ImagePreview',\n    props: Object.assign(Object.assign({}, imagePreviewSharedProps), { onNext: Function, onPrev: Function, clsPrefix: {\n            type: String,\n            required: true\n        } }),\n    setup(props) {\n        const themeRef = useTheme('Image', '-image', style, imageLight, props, toRef(props, 'clsPrefix'));\n        let thumbnailEl = null;\n        const previewRef = ref(null);\n        const previewWrapperRef = ref(null);\n        const previewSrcRef = ref(undefined);\n        const showRef = ref(false);\n        const displayedRef = ref(false);\n        const { localeRef } = useLocale('Image');\n        function syncTransformOrigin() {\n            const { value: previewWrapper } = previewWrapperRef;\n            if (!thumbnailEl || !previewWrapper)\n                return;\n            const { style } = previewWrapper;\n            const tbox = thumbnailEl.getBoundingClientRect();\n            const tx = tbox.left + tbox.width / 2;\n            const ty = tbox.top + tbox.height / 2;\n            style.transformOrigin = `${tx}px ${ty}px`;\n        }\n        function handleKeydown(e) {\n            var _a, _b;\n            switch (e.key) {\n                case ' ':\n                    e.preventDefault();\n                    break;\n                case 'ArrowLeft':\n                    (_a = props.onPrev) === null || _a === void 0 ? void 0 : _a.call(props);\n                    break;\n                case 'ArrowRight':\n                    (_b = props.onNext) === null || _b === void 0 ? void 0 : _b.call(props);\n                    break;\n                case 'Escape':\n                    toggleShow();\n                    break;\n            }\n        }\n        watch(showRef, (value) => {\n            if (value) {\n                on('keydown', document, handleKeydown);\n            }\n            else\n                off('keydown', document, handleKeydown);\n        });\n        onBeforeUnmount(() => {\n            off('keydown', document, handleKeydown);\n        });\n        let startX = 0;\n        let startY = 0;\n        let offsetX = 0;\n        let offsetY = 0;\n        let startOffsetX = 0;\n        let startOffsetY = 0;\n        let mouseDownClientX = 0;\n        let mouseDownClientY = 0;\n        let dragging = false;\n        function handleMouseMove(e) {\n            const { clientX, clientY } = e;\n            offsetX = clientX - startX;\n            offsetY = clientY - startY;\n            beforeNextFrameOnce(derivePreviewStyle);\n        }\n        function getMoveStrategy(opts) {\n            const { mouseUpClientX, mouseUpClientY, mouseDownClientX, mouseDownClientY } = opts;\n            const deltaHorizontal = mouseDownClientX - mouseUpClientX;\n            const deltaVertical = mouseDownClientY - mouseUpClientY;\n            const moveVerticalDirection = `vertical${deltaVertical > 0 ? 'Top' : 'Bottom'}`;\n            const moveHorizontalDirection = `horizontal${deltaHorizontal > 0 ? 'Left' : 'Right'}`;\n            return {\n                moveVerticalDirection,\n                moveHorizontalDirection,\n                deltaHorizontal,\n                deltaVertical\n            };\n        }\n        // avoid image move outside viewport\n        function getDerivedOffset(moveStrategy) {\n            const { value: preview } = previewRef;\n            if (!preview)\n                return { offsetX: 0, offsetY: 0 };\n            const pbox = preview.getBoundingClientRect();\n            const { moveVerticalDirection, moveHorizontalDirection, deltaHorizontal, deltaVertical } = moveStrategy || {};\n            let nextOffsetX = 0;\n            let nextOffsetY = 0;\n            if (pbox.width <= window.innerWidth) {\n                nextOffsetX = 0;\n            }\n            else if (pbox.left > 0) {\n                nextOffsetX = (pbox.width - window.innerWidth) / 2;\n            }\n            else if (pbox.right < window.innerWidth) {\n                nextOffsetX = -(pbox.width - window.innerWidth) / 2;\n            }\n            else if (moveHorizontalDirection === 'horizontalRight') {\n                nextOffsetX = Math.min((pbox.width - window.innerWidth) / 2, startOffsetX - (deltaHorizontal !== null && deltaHorizontal !== void 0 ? deltaHorizontal : 0));\n            }\n            else {\n                nextOffsetX = Math.max(-((pbox.width - window.innerWidth) / 2), startOffsetX - (deltaHorizontal !== null && deltaHorizontal !== void 0 ? deltaHorizontal : 0));\n            }\n            if (pbox.height <= window.innerHeight) {\n                nextOffsetY = 0;\n            }\n            else if (pbox.top > 0) {\n                nextOffsetY = (pbox.height - window.innerHeight) / 2;\n            }\n            else if (pbox.bottom < window.innerHeight) {\n                nextOffsetY = -(pbox.height - window.innerHeight) / 2;\n            }\n            else if (moveVerticalDirection === 'verticalBottom') {\n                nextOffsetY = Math.min((pbox.height - window.innerHeight) / 2, startOffsetY - (deltaVertical !== null && deltaVertical !== void 0 ? deltaVertical : 0));\n            }\n            else {\n                nextOffsetY = Math.max(-((pbox.height - window.innerHeight) / 2), startOffsetY - (deltaVertical !== null && deltaVertical !== void 0 ? deltaVertical : 0));\n            }\n            return {\n                offsetX: nextOffsetX,\n                offsetY: nextOffsetY\n            };\n        }\n        function handleMouseUp(e) {\n            off('mousemove', document, handleMouseMove);\n            off('mouseup', document, handleMouseUp);\n            const { clientX: mouseUpClientX, clientY: mouseUpClientY } = e;\n            dragging = false;\n            const moveStrategy = getMoveStrategy({\n                mouseUpClientX,\n                mouseUpClientY,\n                mouseDownClientX,\n                mouseDownClientY\n            });\n            const offset = getDerivedOffset(moveStrategy);\n            offsetX = offset.offsetX;\n            offsetY = offset.offsetY;\n            derivePreviewStyle();\n        }\n        const imageContext = inject(imageContextKey, null);\n        function handlePreviewMousedown(e) {\n            var _a, _b;\n            (_b = (_a = imageContext === null || imageContext === void 0 ? void 0 : imageContext.previewedImgPropsRef.value) === null || _a === void 0 ? void 0 : _a.onMousedown) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n            if (e.button !== 0)\n                return;\n            const { clientX, clientY } = e;\n            dragging = true;\n            startX = clientX - offsetX;\n            startY = clientY - offsetY;\n            startOffsetX = offsetX;\n            startOffsetY = offsetY;\n            mouseDownClientX = clientX;\n            mouseDownClientY = clientY;\n            derivePreviewStyle();\n            on('mousemove', document, handleMouseMove);\n            on('mouseup', document, handleMouseUp);\n        }\n        function handlePreviewDblclick(e) {\n            var _a, _b;\n            (_b = (_a = imageContext === null || imageContext === void 0 ? void 0 : imageContext.previewedImgPropsRef.value) === null || _a === void 0 ? void 0 : _a.onDblclick) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n            const originalImageSizeScale = getOrignalImageSizeScale();\n            scale = scale === originalImageSizeScale ? 1 : originalImageSizeScale;\n            derivePreviewStyle();\n        }\n        const scaleRadix = 1.5;\n        let scaleExp = 0;\n        let scale = 1;\n        let rotate = 0;\n        function resetScale() {\n            scale = 1;\n            scaleExp = 0;\n        }\n        function handleSwitchPrev() {\n            var _a;\n            resetScale();\n            rotate = 0;\n            (_a = props.onPrev) === null || _a === void 0 ? void 0 : _a.call(props);\n        }\n        function handleSwitchNext() {\n            var _a;\n            resetScale();\n            rotate = 0;\n            (_a = props.onNext) === null || _a === void 0 ? void 0 : _a.call(props);\n        }\n        function rotateCounterclockwise() {\n            rotate -= 90;\n            derivePreviewStyle();\n        }\n        function rotateClockwise() {\n            rotate += 90;\n            derivePreviewStyle();\n        }\n        function getMaxScale() {\n            const { value: preview } = previewRef;\n            if (!preview)\n                return 1;\n            const { innerWidth, innerHeight } = window;\n            const heightMaxScale = Math.max(1, preview.naturalHeight / (innerHeight - BLEEDING));\n            const widthMaxScale = Math.max(1, preview.naturalWidth / (innerWidth - BLEEDING));\n            return Math.max(3, heightMaxScale * 2, widthMaxScale * 2);\n        }\n        function getOrignalImageSizeScale() {\n            const { value: preview } = previewRef;\n            if (!preview)\n                return 1;\n            const { innerWidth, innerHeight } = window;\n            const heightScale = preview.naturalHeight / (innerHeight - BLEEDING);\n            const widthScale = preview.naturalWidth / (innerWidth - BLEEDING);\n            if (heightScale < 1 && widthScale < 1) {\n                return 1;\n            }\n            return Math.max(heightScale, widthScale);\n        }\n        function zoomIn() {\n            const maxScale = getMaxScale();\n            if (scale < maxScale) {\n                scaleExp += 1;\n                scale = Math.min(maxScale, Math.pow(scaleRadix, scaleExp));\n                derivePreviewStyle();\n            }\n        }\n        function zoomOut() {\n            if (scale > 0.5) {\n                const originalScale = scale;\n                scaleExp -= 1;\n                scale = Math.max(0.5, Math.pow(scaleRadix, scaleExp));\n                const diff = originalScale - scale;\n                derivePreviewStyle(false);\n                const offset = getDerivedOffset();\n                scale += diff;\n                derivePreviewStyle(false);\n                scale -= diff;\n                offsetX = offset.offsetX;\n                offsetY = offset.offsetY;\n                derivePreviewStyle();\n            }\n        }\n        function handleDownloadClick() {\n            const src = previewSrcRef.value;\n            if (src) {\n                download(src, undefined);\n            }\n        }\n        function derivePreviewStyle(transition = true) {\n            var _a;\n            const { value: preview } = previewRef;\n            if (!preview)\n                return;\n            const { style } = preview;\n            const controlledStyle = normalizeStyle((_a = imageContext === null || imageContext === void 0 ? void 0 : imageContext.previewedImgPropsRef.value) === null || _a === void 0 ? void 0 : _a.style);\n            let controlledStyleString = '';\n            if (typeof controlledStyle === 'string') {\n                controlledStyleString = controlledStyle + ';';\n            }\n            else {\n                for (const key in controlledStyle) {\n                    controlledStyleString += `${kebabCase(key)}: ${controlledStyle[key]};`;\n                }\n            }\n            const transformStyle = `transform-origin: center; transform: translateX(${offsetX}px) translateY(${offsetY}px) rotate(${rotate}deg) scale(${scale});`;\n            if (dragging) {\n                style.cssText =\n                    controlledStyleString +\n                        'cursor: grabbing; transition: none;' +\n                        transformStyle;\n            }\n            else {\n                style.cssText =\n                    controlledStyleString +\n                        'cursor: grab;' +\n                        transformStyle +\n                        (transition ? '' : 'transition: none;');\n            }\n            if (!transition) {\n                void preview.offsetHeight;\n            }\n        }\n        function toggleShow() {\n            showRef.value = !showRef.value;\n            displayedRef.value = true;\n        }\n        function resizeToOrignalImageSize() {\n            scale = getOrignalImageSizeScale();\n            scaleExp = Math.ceil(Math.log(scale) / Math.log(scaleRadix));\n            offsetX = 0;\n            offsetY = 0;\n            derivePreviewStyle();\n        }\n        const exposedMethods = {\n            setPreviewSrc: (src) => {\n                previewSrcRef.value = src;\n            },\n            setThumbnailEl: (el) => {\n                thumbnailEl = el;\n            },\n            toggleShow\n        };\n        function withTooltip(node, tooltipKey) {\n            if (props.showToolbarTooltip) {\n                const { value: theme } = themeRef;\n                return (h(NTooltip, { to: false, theme: theme.peers.Tooltip, themeOverrides: theme.peerOverrides.Tooltip, keepAliveOnHover: false }, {\n                    default: () => {\n                        return localeRef.value[tooltipKey];\n                    },\n                    trigger: () => node\n                }));\n            }\n            else {\n                return node;\n            }\n        }\n        const cssVarsRef = computed(() => {\n            const { common: { cubicBezierEaseInOut }, self: { toolbarIconColor, toolbarBorderRadius, toolbarBoxShadow, toolbarColor } } = themeRef.value;\n            return {\n                '--n-bezier': cubicBezierEaseInOut,\n                '--n-toolbar-icon-color': toolbarIconColor,\n                '--n-toolbar-color': toolbarColor,\n                '--n-toolbar-border-radius': toolbarBorderRadius,\n                '--n-toolbar-box-shadow': toolbarBoxShadow\n            };\n        });\n        const { inlineThemeDisabled } = useConfig();\n        const themeClassHandle = inlineThemeDisabled\n            ? useThemeClass('image-preview', undefined, cssVarsRef, props)\n            : undefined;\n        return Object.assign({ previewRef,\n            previewWrapperRef, previewSrc: previewSrcRef, show: showRef, appear: useIsMounted(), displayed: displayedRef, previewedImgProps: imageContext === null || imageContext === void 0 ? void 0 : imageContext.previewedImgPropsRef, handleWheel(e) {\n                e.preventDefault();\n            },\n            handlePreviewMousedown,\n            handlePreviewDblclick,\n            syncTransformOrigin, handleAfterLeave: () => {\n                resetScale();\n                rotate = 0;\n                displayedRef.value = false;\n            }, handleDragStart: (e) => {\n                var _a, _b;\n                (_b = (_a = imageContext === null || imageContext === void 0 ? void 0 : imageContext.previewedImgPropsRef.value) === null || _a === void 0 ? void 0 : _a.onDragstart) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n                e.preventDefault();\n            }, zoomIn,\n            zoomOut,\n            handleDownloadClick,\n            rotateCounterclockwise,\n            rotateClockwise,\n            handleSwitchPrev,\n            handleSwitchNext,\n            withTooltip,\n            resizeToOrignalImageSize, cssVars: inlineThemeDisabled ? undefined : cssVarsRef, themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass, onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender }, exposedMethods);\n    },\n    render() {\n        var _a, _b;\n        const { clsPrefix } = this;\n        return (h(Fragment, null, (_b = (_a = this.$slots).default) === null || _b === void 0 ? void 0 :\n            _b.call(_a),\n            h(LazyTeleport, { show: this.show }, {\n                default: () => {\n                    var _a;\n                    if (!(this.show || this.displayed)) {\n                        return null;\n                    }\n                    (_a = this.onRender) === null || _a === void 0 ? void 0 : _a.call(this);\n                    return withDirectives(h(\"div\", { class: [\n                            `${clsPrefix}-image-preview-container`,\n                            this.themeClass\n                        ], style: this.cssVars, onWheel: this.handleWheel },\n                        h(Transition, { name: \"fade-in-transition\", appear: this.appear }, {\n                            default: () => this.show ? (h(\"div\", { class: `${clsPrefix}-image-preview-overlay`, onClick: this.toggleShow })) : null\n                        }),\n                        this.showToolbar ? (h(Transition, { name: \"fade-in-transition\", appear: this.appear }, {\n                            default: () => {\n                                if (!this.show)\n                                    return null;\n                                const { withTooltip } = this;\n                                return (h(\"div\", { class: `${clsPrefix}-image-preview-toolbar` },\n                                    this.onPrev ? (h(Fragment, null,\n                                        withTooltip(h(NBaseIcon, { clsPrefix: clsPrefix, onClick: this.handleSwitchPrev }, { default: () => prevIcon }), 'tipPrevious'),\n                                        withTooltip(h(NBaseIcon, { clsPrefix: clsPrefix, onClick: this.handleSwitchNext }, { default: () => nextIcon }), 'tipNext'))) : null,\n                                    withTooltip(h(NBaseIcon, { clsPrefix: clsPrefix, onClick: this.rotateCounterclockwise }, {\n                                        default: () => (h(RotateCounterclockwiseIcon, null))\n                                    }), 'tipCounterclockwise'),\n                                    withTooltip(h(NBaseIcon, { clsPrefix: clsPrefix, onClick: this.rotateClockwise }, {\n                                        default: () => h(RotateClockwiseIcon, null)\n                                    }), 'tipClockwise'),\n                                    withTooltip(h(NBaseIcon, { clsPrefix: clsPrefix, onClick: this.resizeToOrignalImageSize }, {\n                                        default: () => {\n                                            return h(ResizeSmallIcon, null);\n                                        }\n                                    }), 'tipOriginalSize'),\n                                    withTooltip(h(NBaseIcon, { clsPrefix: clsPrefix, onClick: this.zoomOut }, { default: () => h(ZoomOutIcon, null) }), 'tipZoomOut'),\n                                    withTooltip(h(NBaseIcon, { clsPrefix: clsPrefix, onClick: this.zoomIn }, { default: () => h(ZoomInIcon, null) }), 'tipZoomIn'),\n                                    withTooltip(h(NBaseIcon, { clsPrefix: clsPrefix, onClick: this.handleDownloadClick }, { default: () => downloadIcon }), 'tipDownload'),\n                                    withTooltip(h(NBaseIcon, { clsPrefix: clsPrefix, onClick: this.toggleShow }, { default: () => closeIcon }), 'tipClose')));\n                            }\n                        })) : null,\n                        h(Transition, { name: \"fade-in-scale-up-transition\", onAfterLeave: this.handleAfterLeave, appear: this.appear, \n                            // BUG:\n                            // onEnter will be called twice, I don't know why\n                            // Maybe it is a bug of vue\n                            onEnter: this.syncTransformOrigin, onBeforeLeave: this.syncTransformOrigin }, {\n                            default: () => {\n                                const { previewedImgProps = {} } = this;\n                                return withDirectives(h(\"div\", { class: `${clsPrefix}-image-preview-wrapper`, ref: \"previewWrapperRef\" },\n                                    h(\"img\", Object.assign({}, previewedImgProps, { draggable: false, onMousedown: this.handlePreviewMousedown, onDblclick: this.handlePreviewDblclick, class: [\n                                            `${clsPrefix}-image-preview`,\n                                            previewedImgProps.class\n                                        ], key: this.previewSrc, src: this.previewSrc, ref: \"previewRef\", onDragstart: this.handleDragStart }))), [[vShow, this.show]]);\n                            }\n                        })), [[zindexable, { enabled: this.show }]]);\n                }\n            })));\n    }\n});\n"],"mappings":"AAAA,SAASA,CAAC,EAAEC,eAAe,EAAEC,QAAQ,EAAEC,GAAG,EAAEC,cAAc,EAAEC,UAAU,EAAEC,KAAK,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,eAAe,EAAEC,MAAM,EAAEC,cAAc,QAAQ,KAAK;AAC3J,SAASC,UAAU,QAAQ,OAAO;AAClC,SAASC,YAAY,QAAQ,OAAO;AACpC,SAASC,YAAY,QAAQ,OAAO;AACpC,SAASC,EAAE,EAAEC,GAAG,QAAQ,MAAM;AAC9B,SAASC,mBAAmB,QAAQ,QAAQ;AAC5C,SAASC,SAAS,QAAQ,WAAW;AACrC,SAASC,QAAQ,QAAQ,wBAAwB;AACjD,SAASC,mBAAmB,EAAEC,0BAA0B,EAAEC,UAAU,EAAEC,WAAW,EAAEC,eAAe,QAAQ,uBAAuB;AACjI,SAASC,SAAS,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,aAAa,QAAQ,eAAe;AAC7E,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,QAAQ,QAAQ,eAAe;AACxC,SAASC,UAAU,QAAQ,WAAW;AACtC,SAASC,QAAQ,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,YAAY,QAAQ,SAAS;AACrE,SAASC,eAAe,EAAEC,uBAAuB,QAAQ,aAAa;AACtE,OAAOC,KAAK,MAAM,qBAAqB;AACvC,MAAMC,QAAQ,GAAG,EAAE;AACnB,eAAevC,eAAe,CAAC;EAC3BwC,IAAI,EAAE,cAAc;EACpBC,KAAK,EAAEC,MAAM,CAACC,MAAM,CAACD,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEN,uBAAuB,CAAC,EAAE;IAAEO,MAAM,EAAEC,QAAQ;IAAEC,MAAM,EAAED,QAAQ;IAAEE,SAAS,EAAE;MAC1GC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACd;EAAE,CAAC,CAAC;EACRC,KAAKA,CAACV,KAAK,EAAE;IACT,MAAMW,QAAQ,GAAGzB,QAAQ,CAAC,OAAO,EAAE,QAAQ,EAAEW,KAAK,EAAEP,UAAU,EAAEU,KAAK,EAAEjC,KAAK,CAACiC,KAAK,EAAE,WAAW,CAAC,CAAC;IACjG,IAAIY,WAAW,GAAG,IAAI;IACtB,MAAMC,UAAU,GAAGpD,GAAG,CAAC,IAAI,CAAC;IAC5B,MAAMqD,iBAAiB,GAAGrD,GAAG,CAAC,IAAI,CAAC;IACnC,MAAMsD,aAAa,GAAGtD,GAAG,CAACuD,SAAS,CAAC;IACpC,MAAMC,OAAO,GAAGxD,GAAG,CAAC,KAAK,CAAC;IAC1B,MAAMyD,YAAY,GAAGzD,GAAG,CAAC,KAAK,CAAC;IAC/B,MAAM;MAAE0D;IAAU,CAAC,GAAGlC,SAAS,CAAC,OAAO,CAAC;IACxC,SAASmC,mBAAmBA,CAAA,EAAG;MAC3B,MAAM;QAAEC,KAAK,EAAEC;MAAe,CAAC,GAAGR,iBAAiB;MACnD,IAAI,CAACF,WAAW,IAAI,CAACU,cAAc,EAC/B;MACJ,MAAM;QAAEzB;MAAM,CAAC,GAAGyB,cAAc;MAChC,MAAMC,IAAI,GAAGX,WAAW,CAACY,qBAAqB,CAAC,CAAC;MAChD,MAAMC,EAAE,GAAGF,IAAI,CAACG,IAAI,GAAGH,IAAI,CAACI,KAAK,GAAG,CAAC;MACrC,MAAMC,EAAE,GAAGL,IAAI,CAACM,GAAG,GAAGN,IAAI,CAACO,MAAM,GAAG,CAAC;MACrCjC,KAAK,CAACkC,eAAe,GAAI,GAAEN,EAAG,MAAKG,EAAG,IAAG;IAC7C;IACA,SAASI,aAAaA,CAACC,CAAC,EAAE;MACtB,IAAIC,EAAE,EAAEC,EAAE;MACV,QAAQF,CAAC,CAACG,GAAG;QACT,KAAK,GAAG;UACJH,CAAC,CAACI,cAAc,CAAC,CAAC;UAClB;QACJ,KAAK,WAAW;UACZ,CAACH,EAAE,GAAGlC,KAAK,CAACK,MAAM,MAAM,IAAI,IAAI6B,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACI,IAAI,CAACtC,KAAK,CAAC;UACvE;QACJ,KAAK,YAAY;UACb,CAACmC,EAAE,GAAGnC,KAAK,CAACG,MAAM,MAAM,IAAI,IAAIgC,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACG,IAAI,CAACtC,KAAK,CAAC;UACvE;QACJ,KAAK,QAAQ;UACTuC,UAAU,CAAC,CAAC;UACZ;MACR;IACJ;IACA1E,KAAK,CAACoD,OAAO,EAAGI,KAAK,IAAK;MACtB,IAAIA,KAAK,EAAE;QACP/C,EAAE,CAAC,SAAS,EAAEkE,QAAQ,EAAER,aAAa,CAAC;MAC1C,CAAC,MAEGzD,GAAG,CAAC,SAAS,EAAEiE,QAAQ,EAAER,aAAa,CAAC;IAC/C,CAAC,CAAC;IACFhE,eAAe,CAAC,MAAM;MAClBO,GAAG,CAAC,SAAS,EAAEiE,QAAQ,EAAER,aAAa,CAAC;IAC3C,CAAC,CAAC;IACF,IAAIS,MAAM,GAAG,CAAC;IACd,IAAIC,MAAM,GAAG,CAAC;IACd,IAAIC,OAAO,GAAG,CAAC;IACf,IAAIC,OAAO,GAAG,CAAC;IACf,IAAIC,YAAY,GAAG,CAAC;IACpB,IAAIC,YAAY,GAAG,CAAC;IACpB,IAAIC,gBAAgB,GAAG,CAAC;IACxB,IAAIC,gBAAgB,GAAG,CAAC;IACxB,IAAIC,QAAQ,GAAG,KAAK;IACpB,SAASC,eAAeA,CAACjB,CAAC,EAAE;MACxB,MAAM;QAAEkB,OAAO;QAAEC;MAAQ,CAAC,GAAGnB,CAAC;MAC9BU,OAAO,GAAGQ,OAAO,GAAGV,MAAM;MAC1BG,OAAO,GAAGQ,OAAO,GAAGV,MAAM;MAC1BlE,mBAAmB,CAAC6E,kBAAkB,CAAC;IAC3C;IACA,SAASC,eAAeA,CAACC,IAAI,EAAE;MAC3B,MAAM;QAAEC,cAAc;QAAEC,cAAc;QAAEV,gBAAgB;QAAEC;MAAiB,CAAC,GAAGO,IAAI;MACnF,MAAMG,eAAe,GAAGX,gBAAgB,GAAGS,cAAc;MACzD,MAAMG,aAAa,GAAGX,gBAAgB,GAAGS,cAAc;MACvD,MAAMG,qBAAqB,GAAI,WAAUD,aAAa,GAAG,CAAC,GAAG,KAAK,GAAG,QAAS,EAAC;MAC/E,MAAME,uBAAuB,GAAI,aAAYH,eAAe,GAAG,CAAC,GAAG,MAAM,GAAG,OAAQ,EAAC;MACrF,OAAO;QACHE,qBAAqB;QACrBC,uBAAuB;QACvBH,eAAe;QACfC;MACJ,CAAC;IACL;IACA;IACA,SAASG,gBAAgBA,CAACC,YAAY,EAAE;MACpC,MAAM;QAAE1C,KAAK,EAAE2C;MAAQ,CAAC,GAAGnD,UAAU;MACrC,IAAI,CAACmD,OAAO,EACR,OAAO;QAAErB,OAAO,EAAE,CAAC;QAAEC,OAAO,EAAE;MAAE,CAAC;MACrC,MAAMqB,IAAI,GAAGD,OAAO,CAACxC,qBAAqB,CAAC,CAAC;MAC5C,MAAM;QAAEoC,qBAAqB;QAAEC,uBAAuB;QAAEH,eAAe;QAAEC;MAAc,CAAC,GAAGI,YAAY,IAAI,CAAC,CAAC;MAC7G,IAAIG,WAAW,GAAG,CAAC;MACnB,IAAIC,WAAW,GAAG,CAAC;MACnB,IAAIF,IAAI,CAACtC,KAAK,IAAIyC,MAAM,CAACC,UAAU,EAAE;QACjCH,WAAW,GAAG,CAAC;MACnB,CAAC,MACI,IAAID,IAAI,CAACvC,IAAI,GAAG,CAAC,EAAE;QACpBwC,WAAW,GAAG,CAACD,IAAI,CAACtC,KAAK,GAAGyC,MAAM,CAACC,UAAU,IAAI,CAAC;MACtD,CAAC,MACI,IAAIJ,IAAI,CAACK,KAAK,GAAGF,MAAM,CAACC,UAAU,EAAE;QACrCH,WAAW,GAAG,EAAED,IAAI,CAACtC,KAAK,GAAGyC,MAAM,CAACC,UAAU,CAAC,GAAG,CAAC;MACvD,CAAC,MACI,IAAIR,uBAAuB,KAAK,iBAAiB,EAAE;QACpDK,WAAW,GAAGK,IAAI,CAACC,GAAG,CAAC,CAACP,IAAI,CAACtC,KAAK,GAAGyC,MAAM,CAACC,UAAU,IAAI,CAAC,EAAExB,YAAY,IAAIa,eAAe,KAAK,IAAI,IAAIA,eAAe,KAAK,KAAK,CAAC,GAAGA,eAAe,GAAG,CAAC,CAAC,CAAC;MAC/J,CAAC,MACI;QACDQ,WAAW,GAAGK,IAAI,CAACE,GAAG,CAAC,EAAE,CAACR,IAAI,CAACtC,KAAK,GAAGyC,MAAM,CAACC,UAAU,IAAI,CAAC,CAAC,EAAExB,YAAY,IAAIa,eAAe,KAAK,IAAI,IAAIA,eAAe,KAAK,KAAK,CAAC,GAAGA,eAAe,GAAG,CAAC,CAAC,CAAC;MAClK;MACA,IAAIO,IAAI,CAACnC,MAAM,IAAIsC,MAAM,CAACM,WAAW,EAAE;QACnCP,WAAW,GAAG,CAAC;MACnB,CAAC,MACI,IAAIF,IAAI,CAACpC,GAAG,GAAG,CAAC,EAAE;QACnBsC,WAAW,GAAG,CAACF,IAAI,CAACnC,MAAM,GAAGsC,MAAM,CAACM,WAAW,IAAI,CAAC;MACxD,CAAC,MACI,IAAIT,IAAI,CAACU,MAAM,GAAGP,MAAM,CAACM,WAAW,EAAE;QACvCP,WAAW,GAAG,EAAEF,IAAI,CAACnC,MAAM,GAAGsC,MAAM,CAACM,WAAW,CAAC,GAAG,CAAC;MACzD,CAAC,MACI,IAAId,qBAAqB,KAAK,gBAAgB,EAAE;QACjDO,WAAW,GAAGI,IAAI,CAACC,GAAG,CAAC,CAACP,IAAI,CAACnC,MAAM,GAAGsC,MAAM,CAACM,WAAW,IAAI,CAAC,EAAE5B,YAAY,IAAIa,aAAa,KAAK,IAAI,IAAIA,aAAa,KAAK,KAAK,CAAC,GAAGA,aAAa,GAAG,CAAC,CAAC,CAAC;MAC3J,CAAC,MACI;QACDQ,WAAW,GAAGI,IAAI,CAACE,GAAG,CAAC,EAAE,CAACR,IAAI,CAACnC,MAAM,GAAGsC,MAAM,CAACM,WAAW,IAAI,CAAC,CAAC,EAAE5B,YAAY,IAAIa,aAAa,KAAK,IAAI,IAAIA,aAAa,KAAK,KAAK,CAAC,GAAGA,aAAa,GAAG,CAAC,CAAC,CAAC;MAC9J;MACA,OAAO;QACHhB,OAAO,EAAEuB,WAAW;QACpBtB,OAAO,EAAEuB;MACb,CAAC;IACL;IACA,SAASS,aAAaA,CAAC3C,CAAC,EAAE;MACtB1D,GAAG,CAAC,WAAW,EAAEiE,QAAQ,EAAEU,eAAe,CAAC;MAC3C3E,GAAG,CAAC,SAAS,EAAEiE,QAAQ,EAAEoC,aAAa,CAAC;MACvC,MAAM;QAAEzB,OAAO,EAAEK,cAAc;QAAEJ,OAAO,EAAEK;MAAe,CAAC,GAAGxB,CAAC;MAC9DgB,QAAQ,GAAG,KAAK;MAChB,MAAMc,YAAY,GAAGT,eAAe,CAAC;QACjCE,cAAc;QACdC,cAAc;QACdV,gBAAgB;QAChBC;MACJ,CAAC,CAAC;MACF,MAAM6B,MAAM,GAAGf,gBAAgB,CAACC,YAAY,CAAC;MAC7CpB,OAAO,GAAGkC,MAAM,CAAClC,OAAO;MACxBC,OAAO,GAAGiC,MAAM,CAACjC,OAAO;MACxBS,kBAAkB,CAAC,CAAC;IACxB;IACA,MAAMyB,YAAY,GAAG7G,MAAM,CAAC0B,eAAe,EAAE,IAAI,CAAC;IAClD,SAASoF,sBAAsBA,CAAC9C,CAAC,EAAE;MAC/B,IAAIC,EAAE,EAAEC,EAAE;MACV,CAACA,EAAE,GAAG,CAACD,EAAE,GAAG4C,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,YAAY,CAACE,oBAAoB,CAAC3D,KAAK,MAAM,IAAI,IAAIa,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAC+C,WAAW,MAAM,IAAI,IAAI9C,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACG,IAAI,CAACJ,EAAE,EAAED,CAAC,CAAC;MACzN,IAAIA,CAAC,CAACiD,MAAM,KAAK,CAAC,EACd;MACJ,MAAM;QAAE/B,OAAO;QAAEC;MAAQ,CAAC,GAAGnB,CAAC;MAC9BgB,QAAQ,GAAG,IAAI;MACfR,MAAM,GAAGU,OAAO,GAAGR,OAAO;MAC1BD,MAAM,GAAGU,OAAO,GAAGR,OAAO;MAC1BC,YAAY,GAAGF,OAAO;MACtBG,YAAY,GAAGF,OAAO;MACtBG,gBAAgB,GAAGI,OAAO;MAC1BH,gBAAgB,GAAGI,OAAO;MAC1BC,kBAAkB,CAAC,CAAC;MACpB/E,EAAE,CAAC,WAAW,EAAEkE,QAAQ,EAAEU,eAAe,CAAC;MAC1C5E,EAAE,CAAC,SAAS,EAAEkE,QAAQ,EAAEoC,aAAa,CAAC;IAC1C;IACA,SAASO,qBAAqBA,CAAClD,CAAC,EAAE;MAC9B,IAAIC,EAAE,EAAEC,EAAE;MACV,CAACA,EAAE,GAAG,CAACD,EAAE,GAAG4C,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,YAAY,CAACE,oBAAoB,CAAC3D,KAAK,MAAM,IAAI,IAAIa,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACkD,UAAU,MAAM,IAAI,IAAIjD,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACG,IAAI,CAACJ,EAAE,EAAED,CAAC,CAAC;MACxN,MAAMoD,sBAAsB,GAAGC,wBAAwB,CAAC,CAAC;MACzDC,KAAK,GAAGA,KAAK,KAAKF,sBAAsB,GAAG,CAAC,GAAGA,sBAAsB;MACrEhC,kBAAkB,CAAC,CAAC;IACxB;IACA,MAAMmC,UAAU,GAAG,GAAG;IACtB,IAAIC,QAAQ,GAAG,CAAC;IAChB,IAAIF,KAAK,GAAG,CAAC;IACb,IAAIG,MAAM,GAAG,CAAC;IACd,SAASC,UAAUA,CAAA,EAAG;MAClBJ,KAAK,GAAG,CAAC;MACTE,QAAQ,GAAG,CAAC;IAChB;IACA,SAASG,gBAAgBA,CAAA,EAAG;MACxB,IAAI1D,EAAE;MACNyD,UAAU,CAAC,CAAC;MACZD,MAAM,GAAG,CAAC;MACV,CAACxD,EAAE,GAAGlC,KAAK,CAACK,MAAM,MAAM,IAAI,IAAI6B,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACI,IAAI,CAACtC,KAAK,CAAC;IAC3E;IACA,SAAS6F,gBAAgBA,CAAA,EAAG;MACxB,IAAI3D,EAAE;MACNyD,UAAU,CAAC,CAAC;MACZD,MAAM,GAAG,CAAC;MACV,CAACxD,EAAE,GAAGlC,KAAK,CAACG,MAAM,MAAM,IAAI,IAAI+B,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACI,IAAI,CAACtC,KAAK,CAAC;IAC3E;IACA,SAAS8F,sBAAsBA,CAAA,EAAG;MAC9BJ,MAAM,IAAI,EAAE;MACZrC,kBAAkB,CAAC,CAAC;IACxB;IACA,SAAS0C,eAAeA,CAAA,EAAG;MACvBL,MAAM,IAAI,EAAE;MACZrC,kBAAkB,CAAC,CAAC;IACxB;IACA,SAAS2C,WAAWA,CAAA,EAAG;MACnB,MAAM;QAAE3E,KAAK,EAAE2C;MAAQ,CAAC,GAAGnD,UAAU;MACrC,IAAI,CAACmD,OAAO,EACR,OAAO,CAAC;MACZ,MAAM;QAAEK,UAAU;QAAEK;MAAY,CAAC,GAAGN,MAAM;MAC1C,MAAM6B,cAAc,GAAG1B,IAAI,CAACE,GAAG,CAAC,CAAC,EAAET,OAAO,CAACkC,aAAa,IAAIxB,WAAW,GAAG5E,QAAQ,CAAC,CAAC;MACpF,MAAMqG,aAAa,GAAG5B,IAAI,CAACE,GAAG,CAAC,CAAC,EAAET,OAAO,CAACoC,YAAY,IAAI/B,UAAU,GAAGvE,QAAQ,CAAC,CAAC;MACjF,OAAOyE,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEwB,cAAc,GAAG,CAAC,EAAEE,aAAa,GAAG,CAAC,CAAC;IAC7D;IACA,SAASb,wBAAwBA,CAAA,EAAG;MAChC,MAAM;QAAEjE,KAAK,EAAE2C;MAAQ,CAAC,GAAGnD,UAAU;MACrC,IAAI,CAACmD,OAAO,EACR,OAAO,CAAC;MACZ,MAAM;QAAEK,UAAU;QAAEK;MAAY,CAAC,GAAGN,MAAM;MAC1C,MAAMiC,WAAW,GAAGrC,OAAO,CAACkC,aAAa,IAAIxB,WAAW,GAAG5E,QAAQ,CAAC;MACpE,MAAMwG,UAAU,GAAGtC,OAAO,CAACoC,YAAY,IAAI/B,UAAU,GAAGvE,QAAQ,CAAC;MACjE,IAAIuG,WAAW,GAAG,CAAC,IAAIC,UAAU,GAAG,CAAC,EAAE;QACnC,OAAO,CAAC;MACZ;MACA,OAAO/B,IAAI,CAACE,GAAG,CAAC4B,WAAW,EAAEC,UAAU,CAAC;IAC5C;IACA,SAASC,MAAMA,CAAA,EAAG;MACd,MAAMC,QAAQ,GAAGR,WAAW,CAAC,CAAC;MAC9B,IAAIT,KAAK,GAAGiB,QAAQ,EAAE;QAClBf,QAAQ,IAAI,CAAC;QACbF,KAAK,GAAGhB,IAAI,CAACC,GAAG,CAACgC,QAAQ,EAAEjC,IAAI,CAACkC,GAAG,CAACjB,UAAU,EAAEC,QAAQ,CAAC,CAAC;QAC1DpC,kBAAkB,CAAC,CAAC;MACxB;IACJ;IACA,SAASqD,OAAOA,CAAA,EAAG;MACf,IAAInB,KAAK,GAAG,GAAG,EAAE;QACb,MAAMoB,aAAa,GAAGpB,KAAK;QAC3BE,QAAQ,IAAI,CAAC;QACbF,KAAK,GAAGhB,IAAI,CAACE,GAAG,CAAC,GAAG,EAAEF,IAAI,CAACkC,GAAG,CAACjB,UAAU,EAAEC,QAAQ,CAAC,CAAC;QACrD,MAAMmB,IAAI,GAAGD,aAAa,GAAGpB,KAAK;QAClClC,kBAAkB,CAAC,KAAK,CAAC;QACzB,MAAMwB,MAAM,GAAGf,gBAAgB,CAAC,CAAC;QACjCyB,KAAK,IAAIqB,IAAI;QACbvD,kBAAkB,CAAC,KAAK,CAAC;QACzBkC,KAAK,IAAIqB,IAAI;QACbjE,OAAO,GAAGkC,MAAM,CAAClC,OAAO;QACxBC,OAAO,GAAGiC,MAAM,CAACjC,OAAO;QACxBS,kBAAkB,CAAC,CAAC;MACxB;IACJ;IACA,SAASwD,mBAAmBA,CAAA,EAAG;MAC3B,MAAMC,GAAG,GAAG/F,aAAa,CAACM,KAAK;MAC/B,IAAIyF,GAAG,EAAE;QACLpI,QAAQ,CAACoI,GAAG,EAAE9F,SAAS,CAAC;MAC5B;IACJ;IACA,SAASqC,kBAAkBA,CAAC0D,UAAU,GAAG,IAAI,EAAE;MAC3C,IAAI7E,EAAE;MACN,MAAM;QAAEb,KAAK,EAAE2C;MAAQ,CAAC,GAAGnD,UAAU;MACrC,IAAI,CAACmD,OAAO,EACR;MACJ,MAAM;QAAEnE;MAAM,CAAC,GAAGmE,OAAO;MACzB,MAAMgD,eAAe,GAAG9I,cAAc,CAAC,CAACgE,EAAE,GAAG4C,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,YAAY,CAACE,oBAAoB,CAAC3D,KAAK,MAAM,IAAI,IAAIa,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACrC,KAAK,CAAC;MAChM,IAAIoH,qBAAqB,GAAG,EAAE;MAC9B,IAAI,OAAOD,eAAe,KAAK,QAAQ,EAAE;QACrCC,qBAAqB,GAAGD,eAAe,GAAG,GAAG;MACjD,CAAC,MACI;QACD,KAAK,MAAM5E,GAAG,IAAI4E,eAAe,EAAE;UAC/BC,qBAAqB,IAAK,GAAExI,SAAS,CAAC2D,GAAG,CAAE,KAAI4E,eAAe,CAAC5E,GAAG,CAAE,GAAE;QAC1E;MACJ;MACA,MAAM8E,cAAc,GAAI,mDAAkDvE,OAAQ,kBAAiBC,OAAQ,cAAa8C,MAAO,cAAaH,KAAM,IAAG;MACrJ,IAAItC,QAAQ,EAAE;QACVpD,KAAK,CAACsH,OAAO,GACTF,qBAAqB,GACjB,qCAAqC,GACrCC,cAAc;MAC1B,CAAC,MACI;QACDrH,KAAK,CAACsH,OAAO,GACTF,qBAAqB,GACjB,eAAe,GACfC,cAAc,IACbH,UAAU,GAAG,EAAE,GAAG,mBAAmB,CAAC;MACnD;MACA,IAAI,CAACA,UAAU,EAAE;QACb,KAAK/C,OAAO,CAACoD,YAAY;MAC7B;IACJ;IACA,SAAS7E,UAAUA,CAAA,EAAG;MAClBtB,OAAO,CAACI,KAAK,GAAG,CAACJ,OAAO,CAACI,KAAK;MAC9BH,YAAY,CAACG,KAAK,GAAG,IAAI;IAC7B;IACA,SAASgG,wBAAwBA,CAAA,EAAG;MAChC9B,KAAK,GAAGD,wBAAwB,CAAC,CAAC;MAClCG,QAAQ,GAAGlB,IAAI,CAAC+C,IAAI,CAAC/C,IAAI,CAACgD,GAAG,CAAChC,KAAK,CAAC,GAAGhB,IAAI,CAACgD,GAAG,CAAC/B,UAAU,CAAC,CAAC;MAC5D7C,OAAO,GAAG,CAAC;MACXC,OAAO,GAAG,CAAC;MACXS,kBAAkB,CAAC,CAAC;IACxB;IACA,MAAMmE,cAAc,GAAG;MACnBC,aAAa,EAAGX,GAAG,IAAK;QACpB/F,aAAa,CAACM,KAAK,GAAGyF,GAAG;MAC7B,CAAC;MACDY,cAAc,EAAGC,EAAE,IAAK;QACpB/G,WAAW,GAAG+G,EAAE;MACpB,CAAC;MACDpF;IACJ,CAAC;IACD,SAASqF,WAAWA,CAACC,IAAI,EAAEC,UAAU,EAAE;MACnC,IAAI9H,KAAK,CAAC+H,kBAAkB,EAAE;QAC1B,MAAM;UAAE1G,KAAK,EAAE2G;QAAM,CAAC,GAAGrH,QAAQ;QACjC,OAAQrD,CAAC,CAAC+B,QAAQ,EAAE;UAAE4I,EAAE,EAAE,KAAK;UAAED,KAAK,EAAEA,KAAK,CAACE,KAAK,CAACC,OAAO;UAAEC,cAAc,EAAEJ,KAAK,CAACK,aAAa,CAACF,OAAO;UAAEG,gBAAgB,EAAE;QAAM,CAAC,EAAE;UACjIC,OAAO,EAAEA,CAAA,KAAM;YACX,OAAOpH,SAAS,CAACE,KAAK,CAACyG,UAAU,CAAC;UACtC,CAAC;UACDU,OAAO,EAAEA,CAAA,KAAMX;QACnB,CAAC,CAAC;MACN,CAAC,MACI;QACD,OAAOA,IAAI;MACf;IACJ;IACA,MAAMY,UAAU,GAAG3K,QAAQ,CAAC,MAAM;MAC9B,MAAM;QAAE4K,MAAM,EAAE;UAAEC;QAAqB,CAAC;QAAEC,IAAI,EAAE;UAAEC,gBAAgB;UAAEC,mBAAmB;UAAEC,gBAAgB;UAAEC;QAAa;MAAE,CAAC,GAAGrI,QAAQ,CAACU,KAAK;MAC5I,OAAO;QACH,YAAY,EAAEsH,oBAAoB;QAClC,wBAAwB,EAAEE,gBAAgB;QAC1C,mBAAmB,EAAEG,YAAY;QACjC,2BAA2B,EAAEF,mBAAmB;QAChD,wBAAwB,EAAEC;MAC9B,CAAC;IACL,CAAC,CAAC;IACF,MAAM;MAAEE;IAAoB,CAAC,GAAGjK,SAAS,CAAC,CAAC;IAC3C,MAAMkK,gBAAgB,GAAGD,mBAAmB,GACtC9J,aAAa,CAAC,eAAe,EAAE6B,SAAS,EAAEyH,UAAU,EAAEzI,KAAK,CAAC,GAC5DgB,SAAS;IACf,OAAOf,MAAM,CAACC,MAAM,CAAC;MAAEW,UAAU;MAC7BC,iBAAiB;MAAEqI,UAAU,EAAEpI,aAAa;MAAEqI,IAAI,EAAEnI,OAAO;MAAEoI,MAAM,EAAEjL,YAAY,CAAC,CAAC;MAAEkL,SAAS,EAAEpI,YAAY;MAAEqI,iBAAiB,EAAEzE,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,YAAY,CAACE,oBAAoB;MAAEwE,WAAWA,CAACvH,CAAC,EAAE;QAC3OA,CAAC,CAACI,cAAc,CAAC,CAAC;MACtB,CAAC;MACD0C,sBAAsB;MACtBI,qBAAqB;MACrB/D,mBAAmB;MAAEqI,gBAAgB,EAAEA,CAAA,KAAM;QACzC9D,UAAU,CAAC,CAAC;QACZD,MAAM,GAAG,CAAC;QACVxE,YAAY,CAACG,KAAK,GAAG,KAAK;MAC9B,CAAC;MAAEqI,eAAe,EAAGzH,CAAC,IAAK;QACvB,IAAIC,EAAE,EAAEC,EAAE;QACV,CAACA,EAAE,GAAG,CAACD,EAAE,GAAG4C,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,YAAY,CAACE,oBAAoB,CAAC3D,KAAK,MAAM,IAAI,IAAIa,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACyH,WAAW,MAAM,IAAI,IAAIxH,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACG,IAAI,CAACJ,EAAE,EAAED,CAAC,CAAC;QACzNA,CAAC,CAACI,cAAc,CAAC,CAAC;MACtB,CAAC;MAAEkE,MAAM;MACTG,OAAO;MACPG,mBAAmB;MACnBf,sBAAsB;MACtBC,eAAe;MACfH,gBAAgB;MAChBC,gBAAgB;MAChB+B,WAAW;MACXP,wBAAwB;MAAEuC,OAAO,EAAEX,mBAAmB,GAAGjI,SAAS,GAAGyH,UAAU;MAAEoB,UAAU,EAAEX,gBAAgB,KAAK,IAAI,IAAIA,gBAAgB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,gBAAgB,CAACW,UAAU;MAAEC,QAAQ,EAAEZ,gBAAgB,KAAK,IAAI,IAAIA,gBAAgB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,gBAAgB,CAACY;IAAS,CAAC,EAAEtC,cAAc,CAAC;EAChU,CAAC;EACDuC,MAAMA,CAAA,EAAG;IACL,IAAI7H,EAAE,EAAEC,EAAE;IACV,MAAM;MAAE7B;IAAU,CAAC,GAAG,IAAI;IAC1B,OAAQhD,CAAC,CAACE,QAAQ,EAAE,IAAI,EAAE,CAAC2E,EAAE,GAAG,CAACD,EAAE,GAAG,IAAI,CAAC8H,MAAM,EAAEzB,OAAO,MAAM,IAAI,IAAIpG,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAC1FA,EAAE,CAACG,IAAI,CAACJ,EAAE,CAAC,EACX5E,CAAC,CAACe,YAAY,EAAE;MAAE+K,IAAI,EAAE,IAAI,CAACA;IAAK,CAAC,EAAE;MACjCb,OAAO,EAAEA,CAAA,KAAM;QACX,IAAIrG,EAAE;QACN,IAAI,EAAE,IAAI,CAACkH,IAAI,IAAI,IAAI,CAACE,SAAS,CAAC,EAAE;UAChC,OAAO,IAAI;QACf;QACA,CAACpH,EAAE,GAAG,IAAI,CAAC4H,QAAQ,MAAM,IAAI,IAAI5H,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACI,IAAI,CAAC,IAAI,CAAC;QACvE,OAAO5E,cAAc,CAACJ,CAAC,CAAC,KAAK,EAAE;UAAE2M,KAAK,EAAE,CAC/B,GAAE3J,SAAU,0BAAyB,EACtC,IAAI,CAACuJ,UAAU,CAClB;UAAEhK,KAAK,EAAE,IAAI,CAAC+J,OAAO;UAAEM,OAAO,EAAE,IAAI,CAACV;QAAY,CAAC,EACnDlM,CAAC,CAACK,UAAU,EAAE;UAAEoC,IAAI,EAAE,oBAAoB;UAAEsJ,MAAM,EAAE,IAAI,CAACA;QAAO,CAAC,EAAE;UAC/Dd,OAAO,EAAEA,CAAA,KAAM,IAAI,CAACa,IAAI,GAAI9L,CAAC,CAAC,KAAK,EAAE;YAAE2M,KAAK,EAAG,GAAE3J,SAAU,wBAAuB;YAAE6J,OAAO,EAAE,IAAI,CAAC5H;UAAW,CAAC,CAAC,GAAI;QACvH,CAAC,CAAC,EACF,IAAI,CAAC6H,WAAW,GAAI9M,CAAC,CAACK,UAAU,EAAE;UAAEoC,IAAI,EAAE,oBAAoB;UAAEsJ,MAAM,EAAE,IAAI,CAACA;QAAO,CAAC,EAAE;UACnFd,OAAO,EAAEA,CAAA,KAAM;YACX,IAAI,CAAC,IAAI,CAACa,IAAI,EACV,OAAO,IAAI;YACf,MAAM;cAAExB;YAAY,CAAC,GAAG,IAAI;YAC5B,OAAQtK,CAAC,CAAC,KAAK,EAAE;cAAE2M,KAAK,EAAG,GAAE3J,SAAU;YAAwB,CAAC,EAC5D,IAAI,CAACD,MAAM,GAAI/C,CAAC,CAACE,QAAQ,EAAE,IAAI,EAC3BoK,WAAW,CAACtK,CAAC,CAAC8B,SAAS,EAAE;cAAEkB,SAAS,EAAEA,SAAS;cAAE6J,OAAO,EAAE,IAAI,CAACvE;YAAiB,CAAC,EAAE;cAAE2C,OAAO,EAAEA,CAAA,KAAMhJ;YAAS,CAAC,CAAC,EAAE,aAAa,CAAC,EAC/HqI,WAAW,CAACtK,CAAC,CAAC8B,SAAS,EAAE;cAAEkB,SAAS,EAAEA,SAAS;cAAE6J,OAAO,EAAE,IAAI,CAACtE;YAAiB,CAAC,EAAE;cAAE0C,OAAO,EAAEA,CAAA,KAAM/I;YAAS,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,GAAI,IAAI,EACxIoI,WAAW,CAACtK,CAAC,CAAC8B,SAAS,EAAE;cAAEkB,SAAS,EAAEA,SAAS;cAAE6J,OAAO,EAAE,IAAI,CAACrE;YAAuB,CAAC,EAAE;cACrFyC,OAAO,EAAEA,CAAA,KAAOjL,CAAC,CAACsB,0BAA0B,EAAE,IAAI;YACtD,CAAC,CAAC,EAAE,qBAAqB,CAAC,EAC1BgJ,WAAW,CAACtK,CAAC,CAAC8B,SAAS,EAAE;cAAEkB,SAAS,EAAEA,SAAS;cAAE6J,OAAO,EAAE,IAAI,CAACpE;YAAgB,CAAC,EAAE;cAC9EwC,OAAO,EAAEA,CAAA,KAAMjL,CAAC,CAACqB,mBAAmB,EAAE,IAAI;YAC9C,CAAC,CAAC,EAAE,cAAc,CAAC,EACnBiJ,WAAW,CAACtK,CAAC,CAAC8B,SAAS,EAAE;cAAEkB,SAAS,EAAEA,SAAS;cAAE6J,OAAO,EAAE,IAAI,CAAC9C;YAAyB,CAAC,EAAE;cACvFkB,OAAO,EAAEA,CAAA,KAAM;gBACX,OAAOjL,CAAC,CAACyB,eAAe,EAAE,IAAI,CAAC;cACnC;YACJ,CAAC,CAAC,EAAE,iBAAiB,CAAC,EACtB6I,WAAW,CAACtK,CAAC,CAAC8B,SAAS,EAAE;cAAEkB,SAAS,EAAEA,SAAS;cAAE6J,OAAO,EAAE,IAAI,CAACzD;YAAQ,CAAC,EAAE;cAAE6B,OAAO,EAAEA,CAAA,KAAMjL,CAAC,CAACwB,WAAW,EAAE,IAAI;YAAE,CAAC,CAAC,EAAE,YAAY,CAAC,EACjI8I,WAAW,CAACtK,CAAC,CAAC8B,SAAS,EAAE;cAAEkB,SAAS,EAAEA,SAAS;cAAE6J,OAAO,EAAE,IAAI,CAAC5D;YAAO,CAAC,EAAE;cAAEgC,OAAO,EAAEA,CAAA,KAAMjL,CAAC,CAACuB,UAAU,EAAE,IAAI;YAAE,CAAC,CAAC,EAAE,WAAW,CAAC,EAC9H+I,WAAW,CAACtK,CAAC,CAAC8B,SAAS,EAAE;cAAEkB,SAAS,EAAEA,SAAS;cAAE6J,OAAO,EAAE,IAAI,CAACtD;YAAoB,CAAC,EAAE;cAAE0B,OAAO,EAAEA,CAAA,KAAM7I;YAAa,CAAC,CAAC,EAAE,aAAa,CAAC,EACtIkI,WAAW,CAACtK,CAAC,CAAC8B,SAAS,EAAE;cAAEkB,SAAS,EAAEA,SAAS;cAAE6J,OAAO,EAAE,IAAI,CAAC5H;YAAW,CAAC,EAAE;cAAEgG,OAAO,EAAEA,CAAA,KAAM9I;YAAU,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC;UAChI;QACJ,CAAC,CAAC,GAAI,IAAI,EACVnC,CAAC,CAACK,UAAU,EAAE;UAAEoC,IAAI,EAAE,6BAA6B;UAAEsK,YAAY,EAAE,IAAI,CAACZ,gBAAgB;UAAEJ,MAAM,EAAE,IAAI,CAACA,MAAM;UACzG;UACA;UACA;UACAiB,OAAO,EAAE,IAAI,CAAClJ,mBAAmB;UAAEmJ,aAAa,EAAE,IAAI,CAACnJ;QAAoB,CAAC,EAAE;UAC9EmH,OAAO,EAAEA,CAAA,KAAM;YACX,MAAM;cAAEgB,iBAAiB,GAAG,CAAC;YAAE,CAAC,GAAG,IAAI;YACvC,OAAO7L,cAAc,CAACJ,CAAC,CAAC,KAAK,EAAE;cAAE2M,KAAK,EAAG,GAAE3J,SAAU,wBAAuB;cAAE7C,GAAG,EAAE;YAAoB,CAAC,EACpGH,CAAC,CAAC,KAAK,EAAE2C,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEqJ,iBAAiB,EAAE;cAAEiB,SAAS,EAAE,KAAK;cAAEvF,WAAW,EAAE,IAAI,CAACF,sBAAsB;cAAEK,UAAU,EAAE,IAAI,CAACD,qBAAqB;cAAE8E,KAAK,EAAE,CAClJ,GAAE3J,SAAU,gBAAe,EAC5BiJ,iBAAiB,CAACU,KAAK,CAC1B;cAAE7H,GAAG,EAAE,IAAI,CAAC+G,UAAU;cAAErC,GAAG,EAAE,IAAI,CAACqC,UAAU;cAAE1L,GAAG,EAAE,YAAY;cAAEkM,WAAW,EAAE,IAAI,CAACD;YAAgB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC9L,KAAK,EAAE,IAAI,CAACwL,IAAI,CAAC,CAAC,CAAC;UAC3I;QACJ,CAAC,CAAC,CAAC,EAAE,CAAC,CAACjL,UAAU,EAAE;UAAEsM,OAAO,EAAE,IAAI,CAACrB;QAAK,CAAC,CAAC,CAAC,CAAC;MACpD;IACJ,CAAC,CAAC,CAAC;EACX;AACJ,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}